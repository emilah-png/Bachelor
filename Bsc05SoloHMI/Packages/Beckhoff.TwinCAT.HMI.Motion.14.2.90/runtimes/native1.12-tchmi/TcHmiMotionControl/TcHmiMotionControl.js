"use strict";var TcHmi;!function(TcHmi){!function(Controls){!function(Beckhoff){!function(TcHmiMotion){class TcHmiMotionControl extends TcHmi.Controls.System.TcHmiControl{static#tchmiFQN="TcHmi.Controls.Beckhoff.TcHmiMotion."+this.name;constructor(element,pcElement,attrs){super(element,pcElement,attrs)}__elementTemplateRoot;__elementAnimationBackwards;__elementAnimationForwards;__elementContentTabs;__ButtonPlusPlus;__ButtonPlus;__ButtonMinus;__ButtonMinusMinus;__ButtonStart;__ButtonStop;__ButtonReset;__ButtonHoming;__ButtonSetEnabling;__ButtonSetEnablingAll;__ComboboxAxis;__TextblockAxisName;__TextblockCurrPos;__TextblockCurrVel;__TextblockSetpointPos;__TextblockSetpointVel;__TextblockLagDis;__TextblockError;__TextblockError2;__TextblockOutput;__LabelCurrentPosUnit;__LabelCurrentVelUnit;__CheckboxReady;__CheckboxNotMoving;__CheckboxCalibrated;__CheckboxMoveFw;__CheckboxHasJob;__CheckboxMoveBw;__CheckboxCoupled;__CheckboxTargetPos;__CheckboxPosRange;__CheckboxFeedFw;__CheckboxFeedBw;__CheckboxController;__NumericInputOverride;__NumericInputTargetPos;__NumericInputTargetVel;__TextblockCurrPosFunctions;__TextblockCurrVelFunctions;__LabelCurrentPosUnitFunctions;__LabelCurrentVelUnitFunctions;__ComboboxStartMode;__ComboboxStartModePLCSelection=null;__ExtendedStartModeInput1;__ExtendedStartModeInput2;__ExtendedStartModeInput3;__ExtendedStartModeInput4;__ExtendedStartModeInput5;__ExtendedStartModeLabel1;__ExtendedStartModeLabel2;__ExtendedStartModeLabel3;__ExtendedStartModeLabel4;__ExtendedStartModeLabel5;__ExtendedStartModeCheckbox2;__ExtendedStartModeCheckbox3;__ExtendedStartModeCheckbox4;__ExtendedStartModeCheckbox5;__ExtendedStartModeOptional2;__ExtendedStartModeOptional3;__ExtendedStartModeOptional4;__ExtendedStartModeOptional5;__ButtonStartFunctions;__ButtonStopFunctions;__NC_Ring0_Port_500;__NC_Task_Port_501;__decimalDigits=2;__baseUnit="mm";__axisData={axisName:"",actualPosition:0,actualVelocity:0,setpointPosition:0,setpointVelocity:0,moduloActualPosition:0,moduloSetpointPosition:0,totalOutput:0,controlOutput:0,lagDistance:0,lagDistanceMax:0,lagDistanceMin:0,error:0,isBusy:!1,stop:!1,statusLog:{calibrated:!1,hasJob:!1,movingBw:!1,movingFw:!1,notMoving:!1,ready:!1},statusPhys:{coupledMode:!1,inPosRange:!1,inTargetPosition:!1},enabling:{controller:!1,feedBw:!1,feedFw:!1,override:0},manualVelocityFast:600,manualVelocitySlow:100,referenceVeloctiy:2e3,maxVelocity:2e3,maxAcceleration:15e3,maxDeceleration:15e3};__axisUserInput={targetPosition:0,targetVelocity:0,enabling:{controller:null,feedBw:null,feedFw:null,override:null}};__currentAxis;__ncAxesIDs=[];__subscriptionID=null;__eventDestroyFunctions=[];__axisRefStructure;__mcPower;__mcMoveAbsolute;__McMoveVelocity;__mcReset;__mcHalt;__mcHome;__mcPowerSymbol;__mcMoveAbsoluteSymbol;__McMoveVelocitySymbol;__mcResetSymbol;__mcHaltSymbol;__mcHomeSymbol;__mcPowerSymbolWatchDestroyer=null;__mcMoveAbsoluteSymbolWatchDestroyer=null;__mcMoveVelocitySymbolWatchDestroyer=null;__mcResetSymbolWatchDestroyer=null;__mcHaltSymbolWatchDestroyer=null;__mcHomeSymbolWatchDestroyer=null;__warningBanner=null;__localizedElements=new Map;__localizationReader=void 0;__destroyLocalizationWatch=null;__lastError=null;__mousedownBlock=0;__previnit(){if(super.__previnit(),this.__elementTemplateRoot=this.__element.find(".TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-Template")[0],!this.__elementTemplateRoot)throw new Error("Invalid Template.html");if(this.__elementContentTabs=this.__element[0].getElementsByTagName("tchmi-content-tabs")[0],!this.__elementContentTabs)throw new Error("Invalid Template.html");if(this.__elementAnimationBackwards=this.__element[0].getElementsByClassName("Animation-Container-Backwards"),!this.__elementAnimationBackwards)throw new Error("Invalid Template.html");if(this.__elementAnimationForwards=this.__element[0].getElementsByClassName("Animation-Container-Forwards"),!this.__elementAnimationForwards)throw new Error("Invalid Template.html");if(this.__LabelCurrentPosUnit=this.__element[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-Online-current-position")[0],!this.__LabelCurrentPosUnit)throw new Error("Invalid Template.html");if(this.__LabelCurrentVelUnit=this.__element[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-Online-current-velocity")[0],!this.__LabelCurrentVelUnit)throw new Error("Invalid Template.html");if(this.__LabelCurrentPosUnitFunctions=this.__element[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-Functions-current-position")[0],!this.__LabelCurrentPosUnitFunctions)throw new Error("Invalid Template.html");if(this.__LabelCurrentVelUnitFunctions=this.__element[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-Functions-current-velocity")[0],!this.__LabelCurrentVelUnitFunctions)throw new Error("Invalid Template.html");let button1=Controls.get(this.__id+"_TcHmiButtonPlusPlus");if(!button1)throw new Error("Invalid Template.html");this.__ButtonPlusPlus=button1;let button2=Controls.get(this.__id+"_TcHmiButtonPlus");if(!button2)throw new Error("Invalid Template.html");this.__ButtonPlus=button2;let button3=Controls.get(this.__id+"_TcHmiButtonMinus");if(!button3)throw new Error("Invalid Template.html");this.__ButtonMinus=button3;let button4=Controls.get(this.__id+"_TcHmiButtonMinusMinus");if(!button4)throw new Error("Invalid Template.html");this.__ButtonMinusMinus=button4;let button5=Controls.get(this.__id+"_TcHmiButtonTargetPos");if(!button5)throw new Error("Invalid Template.html");this.__ButtonStart=button5;let button6=Controls.get(this.__id+"_TcHmiButtonStop");if(!button6)throw new Error("Invalid Template.html");this.__ButtonStop=button6;let button7=Controls.get(this.__id+"_TcHmiButtonReset");if(!button7)throw new Error("Invalid Template.html");this.__ButtonReset=button7;let button8=Controls.get(this.__id+"_TcHmiButtonHoming");if(!button8)throw new Error("Invalid Template.html");this.__ButtonHoming=button8;let setEnabling=Controls.get(this.__id+"_TcHmiButtonSetEnabling");if(!setEnabling)throw new Error("Invalid Template.html");this.__ButtonSetEnabling=setEnabling;let setEnablingAll=Controls.get(this.__id+"_TcHmiButtonSetEnablingAll");if(!setEnablingAll)throw new Error("Invalid Template.html");this.__ButtonSetEnablingAll=setEnablingAll;let comboboxAxis=Controls.get(this.__id+"_TcHmiComboboxAxis");if(!comboboxAxis)throw new Error("Invalid Template.html");this.__ComboboxAxis=comboboxAxis;let textboxAxisName=Controls.get(this.__id+"_TcHmiAxisName");if(!textboxAxisName)throw new Error("Invalid Template.html");this.__TextblockAxisName=textboxAxisName;let textboxCurrPos=Controls.get(this.__id+"_TcHmiCurrPos");if(!textboxCurrPos)throw new Error("Invalid Template.html");this.__TextblockCurrPos=textboxCurrPos;let textboxCurrVel=Controls.get(this.__id+"_TcHmiCurrVel");if(!textboxCurrVel)throw new Error("Invalid Template.html");this.__TextblockCurrVel=textboxCurrVel;let ready=Controls.get(this.__id+"_TcHmiReady");if(!ready)throw new Error("Invalid Template.html");this.__CheckboxReady=ready;let notMov=Controls.get(this.__id+"_TcHmiNotMoving");if(!notMov)throw new Error("Invalid Template.html");this.__CheckboxNotMoving=notMov;let cal=Controls.get(this.__id+"_TcHmiCalibrated");if(!cal)throw new Error("Invalid Template.html");this.__CheckboxCalibrated=cal;let fw=Controls.get(this.__id+"_TcHmiMoveFw");if(!fw)throw new Error("Invalid Template.html");this.__CheckboxMoveFw=fw;let job=Controls.get(this.__id+"_TcHmiHasJob");if(!job)throw new Error("Invalid Template.html");this.__CheckboxHasJob=job;let bw=Controls.get(this.__id+"_TcHmiMoveBw");if(!bw)throw new Error("Invalid Template.html");this.__CheckboxMoveBw=bw;let coupled=Controls.get(this.__id+"_TcHmiCoupled");if(!coupled)throw new Error("Invalid Template.html");this.__CheckboxCoupled=coupled;let targetPos=Controls.get(this.__id+"_TcHmiTargetPos");if(!targetPos)throw new Error("Invalid Template.html");this.__CheckboxTargetPos=targetPos;let posRange=Controls.get(this.__id+"_TcHmiPosRange");if(!posRange)throw new Error("Invalid Template.html");this.__CheckboxPosRange=posRange;let feedFw=Controls.get(this.__id+"_TcHmiFeedFw");if(!feedFw)throw new Error("Invalid Template.html");this.__CheckboxFeedFw=feedFw;let feedBw=Controls.get(this.__id+"_TcHmiFeedBw");if(!feedBw)throw new Error("Invalid Template.html");this.__CheckboxFeedBw=feedBw;let controller=Controls.get(this.__id+"_TcHmiController");if(!controller)throw new Error("Invalid Template.html");this.__CheckboxController=controller;let setpointPos=Controls.get(this.__id+"_TcHmiSetpointPos");if(!setpointPos)throw new Error("Invalid Template.html");this.__TextblockSetpointPos=setpointPos;let setpointVel=Controls.get(this.__id+"_TcHmiSetpointVel");if(!setpointVel)throw new Error("Invalid Template.html");this.__TextblockSetpointVel=setpointVel;let lagDis=Controls.get(this.__id+"_TcHmiLagDis");if(!lagDis)throw new Error("Invalid Template.html");this.__TextblockLagDis=lagDis;let error=Controls.get(this.__id+"_TcHmiError");if(!error)throw new Error("Invalid Template.html");this.__TextblockError=error;let error2=Controls.get(this.__id+"_TcHmiError2");if(!error2)throw new Error("Invalid Template.html");this.__TextblockError2=error2;let output=Controls.get(this.__id+"_TcHmiOutput");if(!output)throw new Error("Invalid Template.html");this.__TextblockOutput=output;let textTargetPos=Controls.get(this.__id+"_TcHmiTextTargetPos");if(!textTargetPos)throw new Error("Invalid Template.html");this.__NumericInputTargetPos=textTargetPos;let textTargetVel=Controls.get(this.__id+"_TcHmiTextTargetVel");if(!textTargetVel)throw new Error("Invalid Template.html");this.__NumericInputTargetVel=textTargetVel;let override=Controls.get(this.__id+"_TcHmiOverride");if(!override)throw new Error("Invalid Template.html");this.__NumericInputOverride=override;let comboboxStartMode=Controls.get(this.__id+"_TcHmiComboboxStartMode");if(!comboboxStartMode)throw new Error("Invalid Template.html");this.__ComboboxStartMode=comboboxStartMode;let textboxCurrPosFunctions=Controls.get(this.__id+"_TcHmiCurrPos_Functions");if(!textboxCurrPosFunctions)throw new Error("Invalid Template.html");this.__TextblockCurrPosFunctions=textboxCurrPosFunctions;let textboxCurrVelFunctions=Controls.get(this.__id+"_TcHmiCurrVel_Functions");if(!textboxCurrVelFunctions)throw new Error("Invalid Template.html");this.__TextblockCurrVelFunctions=textboxCurrVelFunctions;let extendedStartMode1=Controls.get(this.__id+"_TcHmiNumericExtendedStartMode_1");if(!extendedStartMode1)throw new Error("Invalid Template.html");this.__ExtendedStartModeInput1=extendedStartMode1;let extendedStartMode2=Controls.get(this.__id+"_TcHmiNumericExtendedStartMode_2");if(!extendedStartMode2)throw new Error("Invalid Template.html");this.__ExtendedStartModeInput2=extendedStartMode2;let extendedStartMode3=Controls.get(this.__id+"_TcHmiNumericExtendedStartMode_3");if(!extendedStartMode3)throw new Error("Invalid Template.html");this.__ExtendedStartModeInput3=extendedStartMode3;let extendedStartMode4=Controls.get(this.__id+"_TcHmiNumericExtendedStartMode_4");if(!extendedStartMode4)throw new Error("Invalid Template.html");this.__ExtendedStartModeInput4=extendedStartMode4;let extendedStartMode5=Controls.get(this.__id+"_TcHmiNumericExtendedStartMode_5");if(!extendedStartMode5)throw new Error("Invalid Template.html");if(this.__ExtendedStartModeInput5=extendedStartMode5,this.__ExtendedStartModeLabel1=this.__element[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-Label-ExtendedStartMode-1")[0],this.__ExtendedStartModeLabel2=this.__element[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-Label-ExtendedStartMode-2")[0],this.__ExtendedStartModeLabel3=this.__element[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-Label-ExtendedStartMode-3")[0],this.__ExtendedStartModeLabel4=this.__element[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-Label-ExtendedStartMode-4")[0],this.__ExtendedStartModeLabel5=this.__element[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-Label-ExtendedStartMode-5")[0],!(this.__ExtendedStartModeLabel1&&this.__ExtendedStartModeLabel2&&this.__ExtendedStartModeLabel3&&this.__ExtendedStartModeLabel4&&this.__ExtendedStartModeLabel5))throw new Error("Invalid Template.html");let extendedCheckbox2=Controls.get(this.__id+"_TcHmiCheckboxExtendedStartMode_2");if(!extendedCheckbox2)throw new Error("Invalid Template.html");this.__ExtendedStartModeCheckbox2=extendedCheckbox2;let extendedCheckbox3=Controls.get(this.__id+"_TcHmiCheckboxExtendedStartMode_3");if(!extendedCheckbox3)throw new Error("Invalid Template.html");this.__ExtendedStartModeCheckbox3=extendedCheckbox3;let extendedCheckbox4=Controls.get(this.__id+"_TcHmiCheckboxExtendedStartMode_4");if(!extendedCheckbox4)throw new Error("Invalid Template.html");this.__ExtendedStartModeCheckbox4=extendedCheckbox4;let extendedCheckbox5=Controls.get(this.__id+"_TcHmiCheckboxExtendedStartMode_5");if(!extendedCheckbox5)throw new Error("Invalid Template.html");if(this.__ExtendedStartModeCheckbox5=extendedCheckbox5,this.__ExtendedStartModeOptional2=this.__element[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-Optional-Input-2")[0],this.__ExtendedStartModeOptional3=this.__element[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-Optional-Input-3")[0],this.__ExtendedStartModeOptional4=this.__element[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-Optional-Input-4")[0],this.__ExtendedStartModeOptional5=this.__element[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-Optional-Input-5")[0],!(this.__ExtendedStartModeOptional2&&this.__ExtendedStartModeOptional3&&this.__ExtendedStartModeOptional4&&this.__ExtendedStartModeOptional5))throw new Error("Invalid Template.html");let startExtended=Controls.get(this.__id+"_TcHmiButtonStart_Functions");if(!startExtended)throw new Error("Invalid Template.html");this.__ButtonStartFunctions=startExtended;let stopExtended=Controls.get(this.__id+"_TcHmiButtonStop_functions");if(!stopExtended)throw new Error("Invalid Template.html");this.__ButtonStopFunctions=stopExtended;let localizedElements=this.__element[0].querySelectorAll("[data-tchmi-localized-content-key]");for(let i=0,ii=localizedElements.length;i<ii;i++){let element=localizedElements[i],localizeKey=element.dataset.tchmiLocalizedContentKey;localizeKey&&this.__localizedElements.set(element,{key:localizeKey})}this.__destroyLocalizationWatch=this.__localization.watch((data=>{if(data.error===TcHmi.Errors.NONE&&data.reader){this.__localizationReader=data.reader;for(const[element,info]of this.__localizedElements){let localizedText=data.reader.get(info.key);info.parameters&&(localizedText=tchmi_format_string(localizedText,...info.parameters)),element.textContent=tchmi_decode_control_characters(localizedText)}}})),TCHMI_DESIGNER?(this.__warningBanner=new Controls.Helpers.Banner(this.__element[0],this),this.__warningBanner.setTexts({headerText:this.__expandLocalizationSymbol("BannerHeadline"),contentText:this.__expandLocalizationSymbol("BannerText")}),this.__warningBanner.show()):(this.__warningBanner=new Controls.Helpers.ApprovalBanner(this.__element[0],this.__id+"-Warning",this),this.__warningBanner.setTexts({headerText:this.__expandLocalizationSymbol("BannerHeadline"),contentText:this.__expandLocalizationSymbol("BannerText"),buttonText:this.__expandLocalizationSymbol("BannerButtonApprove"),checkboxText:this.__expandLocalizationSymbol("BannerCheckboxDontShowAgain")}),this.__warningBanner.show())}__init(){super.__init()}__attach(){super.__attach(),this.__elementTemplateRoot.classList.toggle("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-Wrapped",this.__element[0].clientWidth>700),this.__eventDestroyFunctions.push(TcHmi.EventProvider.register(this.__id+".onResized",this.__onResized),TcHmi.EventProvider.register(this.__ButtonPlusPlus.getId()+".onMouseDown",this.__onMouseDownPlusPlus),TcHmi.EventProvider.register(this.__ButtonPlus.getId()+".onMouseDown",this.__onMouseDownPlus),TcHmi.EventProvider.register(this.__ButtonMinus.getId()+".onMouseDown",this.__onMouseDownMinus),TcHmi.EventProvider.register(this.__ButtonMinusMinus.getId()+".onMouseDown",this.__onMouseDownMinusMinus),TcHmi.EventProvider.register(this.__ButtonPlusPlus.getId()+".onTouchStart",this.__onMouseDownPlusPlus),TcHmi.EventProvider.register(this.__ButtonPlus.getId()+".onTouchStart",this.__onMouseDownPlus),TcHmi.EventProvider.register(this.__ButtonMinus.getId()+".onTouchStart",this.__onMouseDownMinus),TcHmi.EventProvider.register(this.__ButtonMinusMinus.getId()+".onTouchStart",this.__onMouseDownMinusMinus),TcHmi.EventProvider.register(this.__ButtonSetEnablingAll.getId()+".onPressed",this.__onMouseDownAll),TcHmi.EventProvider.register(this.__ButtonSetEnabling.getId()+".onPressed",this.__onMouseDownSet),TcHmi.EventProvider.register(this.__ButtonStart.getId()+".onPressed",this.__onMouseDownStart),TcHmi.EventProvider.register(this.__ButtonStop.getId()+".onPressed",this.__onMouseDownStop),TcHmi.EventProvider.register(this.__ButtonReset.getId()+".onPressed",this.__onMouseDownReset),TcHmi.EventProvider.register(this.__ButtonHoming.getId()+".onPressed",this.__onMouseDownHome),TcHmi.EventProvider.register(this.__ComboboxAxis.getId()+".onSelectionChanged",this.__onComboboxChanged),TcHmi.EventProvider.register(this.__CheckboxFeedBw.getId()+".onToggleStateChanged",this.__onChangeFeedBw),TcHmi.EventProvider.register(this.__CheckboxFeedFw.getId()+".onToggleStateChanged",this.__onChangeFeedFw),TcHmi.EventProvider.register(this.__CheckboxController.getId()+".onToggleStateChanged",this.__onChangeController),TcHmi.EventProvider.register(this.__NumericInputOverride.getId()+".onUserInteractionFinished",this.__onChangeOverride),TcHmi.EventProvider.register(this.__NumericInputTargetPos.getId()+".onUserInteractionFinished",this.__onChangeTargetPos),TcHmi.EventProvider.register(this.__NumericInputTargetVel.getId()+".onUserInteractionFinished",this.__onChangeTargetVel),TcHmi.EventProvider.register("onUserDataChanged",this.__onUserDataChanged),TcHmi.EventProvider.register(this.__ComboboxStartMode.getId()+".onSelectionChanged",this.__onStartModeChanged),TcHmi.EventProvider.register(this.__ButtonStartFunctions.getId()+".onPressed",this.__onMouseDownStartExtendedMode),TcHmi.EventProvider.register(this.__ButtonStopFunctions.getId()+".onPressed",this.__onMouseDownStop),TcHmi.EventProvider.register(this.__ExtendedStartModeCheckbox2.getId()+".onToggleStateChanged",this.__onChangeExtendedStartModeCheckbox2),TcHmi.EventProvider.register(this.__ExtendedStartModeCheckbox3.getId()+".onToggleStateChanged",this.__onChangeExtendedStartModeCheckbox3),TcHmi.EventProvider.register(this.__ExtendedStartModeCheckbox4.getId()+".onToggleStateChanged",this.__onChangeExtendedStartModeCheckbox4),TcHmi.EventProvider.register(this.__ExtendedStartModeCheckbox5.getId()+".onToggleStateChanged",this.__onChangeExtendedStartModeCheckbox5)),this.__checkAccess(),this.__ComboboxAxis.setVisibility(this.__axisRefStructure?"Collapsed":"Visible"),this.__TextblockAxisName.setVisibility(this.__axisRefStructure?"Visible":"Collapsed"),this.__axisRefStructure?this.__elementContentTabs.enableContentTabs():this.__elementContentTabs.disableContentTabs(),this.__getNcAxes(),this.__onStartModeChanged(),this.__setExtendedStartModeUnits()}__expandLocalizationSymbol(key){return`%l%Control::TcHmi.Controls.Beckhoff.TcHmiMotion.TcHmiMotionControl::${key}%/l%`}__detach(){super.__detach();for(let destroyFunction of this.__eventDestroyFunctions)destroyFunction();this.__eventDestroyFunctions=[]}destroy(){this.__keepAlive||(this.__mcPowerSymbol?.destroy(),this.__mcPowerSymbol=void 0,this.__mcMoveAbsoluteSymbol?.destroy(),this.__mcMoveAbsoluteSymbol=void 0,this.__McMoveVelocitySymbol?.destroy(),this.__McMoveVelocitySymbol=void 0,this.__mcResetSymbol?.destroy(),this.__mcResetSymbol=void 0,this.__mcHaltSymbol?.destroy(),this.__mcHaltSymbol=void 0,this.__mcHomeSymbol?.destroy(),this.__mcHomeSymbol=void 0,this.__destroyLocalizationWatch?.(),this.__destroyLocalizationWatch=null,this.__mcHaltSymbolWatchDestroyer?.(),this.__mcHaltSymbolWatchDestroyer=null,this.__mcPowerSymbolWatchDestroyer?.(),this.__mcPowerSymbolWatchDestroyer=null,this.__mcMoveAbsoluteSymbolWatchDestroyer?.(),this.__mcMoveAbsoluteSymbolWatchDestroyer=null,this.__mcMoveVelocitySymbolWatchDestroyer?.(),this.__mcMoveVelocitySymbolWatchDestroyer=null,this.__mcResetSymbolWatchDestroyer?.(),this.__mcResetSymbolWatchDestroyer=null,this.__mcHomeSymbolWatchDestroyer?.(),this.__mcHomeSymbolWatchDestroyer=null,this.__warningBanner?.destroy(),this.__warningBanner=null,super.destroy())}__addLocalizedElement(element,key,...parameters){let info={key:key};if(0!==parameters.length&&(info.parameters=parameters),this.__localizedElements.set(element,info),this.__localizationReader){let localizedText=this.__localizationReader.get(key);info.parameters&&(localizedText=tchmi_format_string(localizedText,...info.parameters)),element.textContent=tchmi_decode_control_characters(localizedText)}}__removeLocalizedElement(element){this.__localizedElements.delete(element)}__onResized=()=>{this.__elementTemplateRoot.classList.toggle("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-Wrapped",(this.getRenderedWidth()??0)>700)};__updateGUI(){this.__TextblockAxisName.setText(this.__axisData.axisName),this.__TextblockCurrPos.setText(this.__axisData.actualPosition.toFixed(this.__decimalDigits)),this.__TextblockCurrVel.setText(this.__axisData.actualVelocity.toFixed(this.__decimalDigits)),this.__TextblockCurrPosFunctions.setText(this.__axisData.actualPosition.toFixed(this.__decimalDigits)),this.__TextblockCurrVelFunctions.setText(this.__axisData.actualVelocity.toFixed(this.__decimalDigits)),this.__TextblockSetpointPos.setText(this.__axisData.setpointPosition.toFixed(this.__decimalDigits)+" "+this.__baseUnit),this.__TextblockSetpointVel.setText(this.__axisData.setpointVelocity.toFixed(this.__decimalDigits)+"  "+this.__baseUnit+"/s"),this.__TextblockLagDis.setText(this.__axisData.lagDistance.toFixed(this.__decimalDigits)+" ("+this.__axisData.lagDistanceMin.toFixed(this.__decimalDigits)+", "+this.__axisData.lagDistanceMax.toFixed(this.__decimalDigits)+") "+this.__baseUnit);let error=this.__axisData.error?this.__axisData.error:this.__lastError??0;this.__TextblockError.setText(error.toString()+" (0x"+error.toString(16)+")"),this.__TextblockError.getElement()[0].classList.toggle("tchmi-error",0!==error),this.__TextblockError2.setText(error.toString()+" (0x"+error.toString(16)+")"),this.__TextblockError2.getElement()[0].classList.toggle("tchmi-error",0!==error),this.__TextblockOutput.setText(this.__axisData.totalOutput.toFixed(2)+"% / "+this.__axisData.controlOutput.toFixed(2)+"%"),this.__NumericInputTargetPos.setValue(this.__axisUserInput.targetPosition),this.__NumericInputTargetPos.setUnit(this.__baseUnit),this.__NumericInputTargetVel.setValue(this.__axisUserInput.targetVelocity),this.__NumericInputTargetVel.setUnit(this.__baseUnit+"/s"),this.__NumericInputOverride.setValue(this.__axisUserInput.enabling.override??this.__axisData.enabling.override),this.__NumericInputOverride.getElement()[0].classList.toggle("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-user-input",null!==this.__axisUserInput.enabling.override&&this.__axisUserInput.enabling.override!==this.__axisData.enabling.override),this.__CheckboxReady.setToggleState(this.__axisData.statusLog.ready?"Active":"Normal"),this.__CheckboxCalibrated.setToggleState(this.__axisData.statusLog.calibrated?"Active":"Normal"),this.__CheckboxHasJob.setToggleState(this.__axisData.statusLog.hasJob?"Active":"Normal"),this.__CheckboxNotMoving.setToggleState(this.__axisData.statusLog.notMoving?"Active":"Normal"),this.__CheckboxMoveFw.setToggleState(this.__axisData.statusLog.movingFw?"Active":"Normal"),this.__CheckboxMoveBw.setToggleState(this.__axisData.statusLog.movingBw?"Active":"Normal"),this.__CheckboxTargetPos.setToggleState(this.__axisData.statusPhys.inTargetPosition?"Active":"Normal"),this.__CheckboxPosRange.setToggleState(this.__axisData.statusPhys.inPosRange?"Active":"Normal"),this.__CheckboxCoupled.setToggleState(this.__axisData.statusPhys.coupledMode?"Active":"Normal"),this.__CheckboxController.setToggleState(this.__axisUserInput.enabling.controller??this.__axisData.enabling.controller?"Active":"Normal"),this.__CheckboxController.getElement()[0].classList.toggle("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-user-input",null!==this.__axisUserInput.enabling.controller&&this.__axisUserInput.enabling.controller!==this.__axisData.enabling.controller),this.__CheckboxFeedFw.setToggleState(this.__axisUserInput.enabling.feedFw??this.__axisData.enabling.feedFw?"Active":"Normal"),this.__CheckboxFeedFw.getElement()[0].classList.toggle("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-user-input",null!==this.__axisUserInput.enabling.feedFw&&this.__axisUserInput.enabling.feedFw!==this.__axisData.enabling.feedFw),this.__CheckboxFeedBw.setToggleState(this.__axisUserInput.enabling.feedBw??this.__axisData.enabling.feedBw?"Active":"Normal"),this.__CheckboxFeedBw.getElement()[0].classList.toggle("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-user-input",null!==this.__axisUserInput.enabling.feedBw&&this.__axisUserInput.enabling.feedBw!==this.__axisData.enabling.feedBw),this.__updateAnimation()}__resetAxisData(){this.__axisData={axisName:"",actualPosition:0,actualVelocity:0,setpointPosition:0,setpointVelocity:0,moduloActualPosition:0,moduloSetpointPosition:0,totalOutput:0,controlOutput:0,lagDistance:0,lagDistanceMax:0,lagDistanceMin:0,error:0,isBusy:!1,stop:!1,statusLog:{calibrated:!1,hasJob:!1,movingBw:!1,movingFw:!1,notMoving:!1,ready:!1},statusPhys:{coupledMode:!1,inPosRange:!1,inTargetPosition:!1},enabling:{controller:!1,feedBw:!1,feedFw:!1,override:0},manualVelocityFast:600,manualVelocitySlow:100,referenceVeloctiy:2e3,maxVelocity:2e3,maxAcceleration:15e3,maxDeceleration:15e3},this.__updateGUI(),this.__axisUserInput={targetPosition:0,targetVelocity:0,enabling:{controller:null,feedBw:null,feedFw:null,override:null}}}__getPLCData(){if(!this.__axisRefStructure)return;this.__axisData.actualPosition=this.__axisRefStructure.NcToPlc.ActPos,this.__axisData.actualVelocity=this.__axisRefStructure.NcToPlc.ActVelo,this.__axisData.setpointPosition=this.__axisRefStructure.NcToPlc.SetPos,this.__axisData.setpointVelocity=this.__axisRefStructure.NcToPlc.SetVelo,this.__axisData.lagDistance=this.__axisRefStructure.NcToPlc.PosDiff,this.__axisData.statusLog.hasJob=this.__axisRefStructure.Status.HasJob,this.__axisData.statusLog.notMoving=this.__axisRefStructure.Status.NotMoving,this.__axisData.statusLog.movingFw=this.__axisRefStructure.Status.PositiveDirection,this.__axisData.statusLog.movingBw=this.__axisRefStructure.Status.NegativeDirection,this.__axisData.statusPhys.coupledMode=this.__axisRefStructure.Status.Coupled,this.__axisData.statusPhys.inTargetPosition=this.__axisRefStructure.Status.InTargetPosition,this.__axisData.statusPhys.inPosRange=this.__axisRefStructure.Status.InPositionArea,this.__mcPower&&(this.__axisData.statusLog.ready=this.__mcPower.Status,this.__axisData.enabling.controller=this.__mcPower.Enable,this.__axisData.enabling.feedFw=this.__mcPower.Enable_Positive,this.__axisData.enabling.feedBw=this.__mcPower.Enable_Negative,this.__axisData.enabling.override=this.__mcPower.Override);let error=this.__axisRefStructure?.Status.ErrorID;this.__mcPower?.ErrorID&&!error&&(error=this.__mcPower.ErrorID),this.__mcMoveAbsolute?.ErrorID&&!error&&(error=this.__mcMoveAbsolute.ErrorID),this.__McMoveVelocity?.ErrorID&&!error&&(error=this.__McMoveVelocity.ErrorID),this.__mcHalt?.ErrorID&&!error&&(error=this.__mcHalt.ErrorID),this.__mcHome?.ErrorID&&!error&&(error=this.__mcHome.ErrorID),this.__mcReset?.ErrorID&&!error&&(error=this.__mcReset.ErrorID),this.__axisData.error=error??0,this.__updateGUI()}__writeMcPower(mcPower){this.__mcPowerSymbol&&(TcHmi.Server.writeSymbol([this.__mcPowerSymbol.getExpression().getName()+"::Enable",this.__mcPowerSymbol.getExpression().getName()+"::Enable_Negative",this.__mcPowerSymbol.getExpression().getName()+"::Enable_Positive",this.__mcPowerSymbol.getExpression().getName()+"::Override"],[mcPower.Enable,mcPower.Enable_Negative,mcPower.Enable_Positive,mcPower.Override],this.__handleWriteResponse),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"McPower"}))}__writeMcMoveAbsolute(mcMoveAbsolute){this.__mcMoveAbsoluteSymbol&&(TcHmi.Server.writeSymbol([this.__mcMoveAbsoluteSymbol.getExpression().getName()+"::Execute",this.__mcMoveAbsoluteSymbol.getExpression().getName()+"::Velocity",this.__mcMoveAbsoluteSymbol.getExpression().getName()+"::Position",this.__mcMoveAbsoluteSymbol.getExpression().getName()+"::Acceleration",this.__mcMoveAbsoluteSymbol.getExpression().getName()+"::Deceleration",this.__mcMoveAbsoluteSymbol.getExpression().getName()+"::Jerk"],[mcMoveAbsolute.Execute,mcMoveAbsolute.Velocity,mcMoveAbsolute.Position,mcMoveAbsolute.Acceleration,mcMoveAbsolute.Deceleration,mcMoveAbsolute.Jerk],this.__handleWriteResponse),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"McMoveAbsolute"}))}__writeMcMoveVelocity(McMoveVelocity){this.__McMoveVelocitySymbol&&(TcHmi.Server.writeSymbol([this.__McMoveVelocitySymbol.getExpression().getName()+"::Execute",this.__McMoveVelocitySymbol.getExpression().getName()+"::Velocity",this.__McMoveVelocitySymbol.getExpression().getName()+"::Direction"],[McMoveVelocity.Execute,McMoveVelocity.Velocity,McMoveVelocity.Direction],this.__handleWriteResponse),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"McMoveVelocity"}))}__writeMcReset(mcReset){this.__mcResetSymbol&&(TcHmi.Server.writeSymbol([this.__mcResetSymbol.getExpression().getName()+"::Execute"],[mcReset.Execute],this.__handleWriteResponse),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"McReset"}))}__writeMcHalt(mcHalt){this.__mcHaltSymbol&&(TcHmi.Server.writeSymbol([this.__mcHaltSymbol.getExpression().getName()+"::Execute"],[mcHalt.Execute],this.__handleWriteResponse),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"McHalt"}))}__writeMcHome(mcHome){this.__mcHomeSymbol&&(TcHmi.Server.writeSymbol([this.__mcHomeSymbol.getExpression().getName()+"::Execute"],[mcHome.Execute],this.__handleWriteResponse),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"McHome"}))}__handleWriteResponse=data=>{if(data.error!==TcHmi.Errors.NONE&&TcHmi.Log.error("Failed to write Function block data."),data.results?.length)for(let result of data.results)result.error!==TcHmi.Errors.NONE&&TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, `+TcHmi.Log.buildMessage(result.details))};__updateSubscription(){this.__subscriptionID&&(TcHmi.Server.unsubscribeEx(this.__subscriptionID,null),this.__subscriptionID=null);const axisID=this.__getAxisID();if(!axisID)return;let commands=[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:16640+axisID,IndexOffset:0,ReadLen:256,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:16384+axisID,IndexOffset:9,ReadLen:8,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:16384+axisID,IndexOffset:8,ReadLen:8,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:16384+axisID,IndexOffset:2,ReadLen:8,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:28672+axisID,IndexOffset:257,ReadLen:8,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:16384+axisID,IndexOffset:39,ReadLen:8,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:16384+axisID,IndexOffset:241,ReadLen:8,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:16384+axisID,IndexOffset:242,ReadLen:8,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:16384+axisID,IndexOffset:5,ReadLen:8,Runtime:this.__NC_Ring0_Port_500}}];this.__mcPower||commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:17152+axisID,IndexOffset:2,ReadLen:2,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:17152+axisID,IndexOffset:3,ReadLen:2,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:17152+axisID,IndexOffset:4,ReadLen:2,Runtime:this.__NC_Ring0_Port_500}}),this.__axisRefStructure||commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:17152+axisID,IndexOffset:130,ReadLen:2,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:17152+axisID,IndexOffset:131,ReadLen:2,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:17152+axisID,IndexOffset:155,ReadLen:2,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:17152+axisID,IndexOffset:140,ReadLen:2,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:17152+axisID,IndexOffset:138,ReadLen:2,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:17152+axisID,IndexOffset:139,ReadLen:2,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:17152+axisID,IndexOffset:143,ReadLen:2,Runtime:this.__NC_Ring0_Port_500}},{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:17152+axisID,IndexOffset:142,ReadLen:2,Runtime:this.__NC_Ring0_Port_500}}),this.__subscriptionID=TcHmi.Server.subscribeEx(commands,200,null,this.__onNcDataSubscription)}__onNcDataSubscription=data=>{const error=this.__checkServerErrors(data);if(error)return void TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, `+TcHmi.Log.buildMessage(error));const axisID=this.__getAxisID();for(let command of data.response.commands)if(command.readValue){if(command.writeValue?.IndexGroup===16640+axisID&&0===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisRefStructure?(br.readUInt32(),br.readUInt32(),br.readDouble(),br.readDouble(),br.readDouble(),br.readDouble(),br.readDouble(),br.readDouble()):(this.__axisData.error=br.readUInt32(),br.readUInt32(),this.__axisData.actualPosition=br.readDouble(),this.__axisData.moduloActualPosition=br.readDouble(),this.__axisData.setpointPosition=br.readDouble(),this.__axisData.moduloSetpointPosition=br.readDouble(),this.__axisData.actualVelocity=br.readDouble(),this.__axisData.setpointVelocity=br.readDouble()),this.__mcPower?br.readUInt32():this.__axisData.enabling.override=br.readUInt32()/1e4,br.readUInt32(),this.__axisRefStructure?(br.readDouble(),br.readDouble(),br.readDouble()):(this.__axisData.lagDistance=br.readDouble(),this.__axisData.lagDistanceMin=br.readDouble(),this.__axisData.lagDistanceMax=br.readDouble()),this.__axisData.controlOutput=br.readDouble(),this.__axisData.totalOutput=br.readDouble(),br.readUInt32(),br.readUInt32(),this.__axisRefStructure?br.readUInt32():this.__axisData.statusPhys.coupledMode=br.readUInt32()>1,br.readUInt32()}else if(command.writeValue?.IndexGroup===17152+axisID&&2===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.enabling.controller=TcHmi.ValueConverter.toBoolean(br.readUInt16())}else if(command.writeValue?.IndexGroup===17152+axisID&&3===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.enabling.feedFw=TcHmi.ValueConverter.toBoolean(br.readUInt16())}else if(command.writeValue?.IndexGroup===17152+axisID&&4===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.enabling.feedBw=TcHmi.ValueConverter.toBoolean(br.readUInt16())}else if(command.writeValue?.IndexGroup===17152+axisID&&130===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.statusLog.ready=TcHmi.ValueConverter.toBoolean(br.readUInt16())}else if(command.writeValue?.IndexGroup===17152+axisID&&131===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.statusLog.calibrated=TcHmi.ValueConverter.toBoolean(br.readUInt16())}else if(command.writeValue?.IndexGroup===17152+axisID&&155===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.statusLog.hasJob=TcHmi.ValueConverter.toBoolean(br.readUInt16())}else if(command.writeValue?.IndexGroup===17152+axisID&&140===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.statusLog.notMoving=TcHmi.ValueConverter.toBoolean(br.readUInt16())}else if(command.writeValue?.IndexGroup===17152+axisID&&138===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.statusLog.movingFw=TcHmi.ValueConverter.toBoolean(br.readUInt16())}else if(command.writeValue?.IndexGroup===17152+axisID&&139===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.statusLog.movingBw=TcHmi.ValueConverter.toBoolean(br.readUInt16())}else if(command.writeValue?.IndexGroup===17152+axisID&&143===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.statusPhys.inTargetPosition=TcHmi.ValueConverter.toBoolean(br.readUInt16())}else if(command.writeValue?.IndexGroup===17152+axisID&&142===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.statusPhys.inPosRange=TcHmi.ValueConverter.toBoolean(br.readUInt16())}else if(command.writeValue?.IndexGroup===16384+axisID&&9===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.manualVelocityFast=br.readDouble()}else if(command.writeValue?.IndexGroup===16384+axisID&&8===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.manualVelocitySlow=br.readDouble()}else if(command.writeValue?.IndexGroup===16384+axisID&&2===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.axisName=br.readString({encoding:"Windows-1252"})}else if(command.writeValue?.IndexGroup===28672+axisID&&257===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.referenceVeloctiy=br.readDouble()}else if(command.writeValue?.IndexGroup===16384+axisID&&39===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.maxVelocity=br.readDouble()}else if(command.writeValue?.IndexGroup===16384+axisID&&241===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.maxAcceleration=br.readDouble()}else if(command.writeValue?.IndexGroup===16384+axisID&&242===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__axisData.maxDeceleration=br.readDouble()}else if(command.writeValue?.IndexGroup===16384+axisID&&5===command.writeValue.IndexOffset){const br=new TcHmi.Base64BinaryReader(command.readValue);this.__baseUnit=br.readString({encoding:"Windows-1252"}),this.__setExtendedStartModeUnits(),this.__LabelCurrentPosUnit.textContent=this.__baseUnit,this.__LabelCurrentVelUnit.textContent=this.__baseUnit+"/s",this.__LabelCurrentPosUnitFunctions.textContent=this.__baseUnit,this.__LabelCurrentVelUnitFunctions.textContent=this.__baseUnit+"/s"}}else TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, `+TcHmi.Log.buildMessage({code:TcHmi.Errors.E_SERVER_READVALUE_MISSING,message:TcHmi.Errors[TcHmi.Errors.E_SERVER_READVALUE_MISSING],reason:"Missing readValue in response from server with id: '"+data.response.id+"'.",domain:this.__type}));this.__updateGUI()};__checkServerErrors(data){if(data.error!==TcHmi.Errors.NONE)return data.details??{code:data.error};if(!data.response)return{code:TcHmi.Errors.E_SERVER_RESPONSE_MISSING,message:TcHmi.Errors[TcHmi.Errors.E_SERVER_RESPONSE_MISSING],reason:"Missing response from server.",domain:this.__type};if(data.response.error)return data.response.error;if(!data.response.commands||0===data.response.commands.length)return{code:TcHmi.Errors.E_SERVER_COMMANDS_MISSING,message:TcHmi.Errors[TcHmi.Errors.E_SERVER_COMMANDS_MISSING],reason:"Missing commands in response from server with id: "+data.response.id,domain:this.__type};const commandErrors=[];for(const command of data.response.commands)command.error&&commandErrors.push(command.error);return commandErrors.length>0?1===commandErrors.length?commandErrors[0]:{code:TcHmi.Errors.E_SERVER_COMMAND_ERROR,message:TcHmi.Errors[TcHmi.Errors.E_SERVER_COMMAND_ERROR],reason:"Multiple errors in commands of server response with id "+data.response.id,domain:this.__type,errors:commandErrors}:null}__writeTargetValuesToNC(targetPos,targetVel){const bw=new TcHmi.Base64BinaryWriter;bw.writeDouble(targetPos),bw.writeDouble(targetVel),bw.writeDouble(0),bw.writeInt32(0);const wdata=bw.getEncodedString(),axisId=this.__getAxisID();TcHmi.Server.request({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadWriteReq",writeValue:{IndexGroup:17152+axisId,IndexOffset:39,ReadLen:4,Runtime:this.__NC_Task_Port_501??"",WriteData:wdata}}]},(data=>{const error=this.__checkServerErrors(data);if(!error){if(data.response.commands[0].readValue){const br=new TcHmi.Base64BinaryReader(data.response.commands[0].readValue);let pos=br.readDouble(),vel=br.readDouble();br.readDouble(),br.readInt32(),this.__NumericInputTargetPos.setValue(pos),this.__NumericInputTargetPos.setValue(vel)}return 0}TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Failed to write target position and velocity to Axis ${axisId}. `+TcHmi.Log.buildMessage(error))}))}__getNcAxes(){TcHmi.Server.request({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:4352,IndexOffset:3,ReadLen:4,Runtime:this.__NC_Ring0_Port_500??""}}]},(data=>{const error=this.__checkServerErrors(data);if(error)TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Failed to get Axis count. `+TcHmi.Log.buildMessage(error));else if(data.response.commands[0].readValue){const axisCount=new TcHmi.Base64BinaryReader(data.response.commands[0].readValue).readUInt32();TcHmi.Server.request({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:4352,IndexOffset:51,ReadLen:4*axisCount,Runtime:this.__NC_Ring0_Port_500??""}}]},(data=>{const error=this.__checkServerErrors(data);if(error)TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Failed to get Axis count. `+TcHmi.Log.buildMessage(error));else if(data.response.commands[0].readValue){this.__ncAxesIDs=[];const br=new TcHmi.Base64BinaryReader(data.response.commands[0].readValue);for(let i=0;i<axisCount;i++){const ID=br.readUInt32();0!==ID&&this.__ncAxesIDs.push(ID)}this.__ncAxesIDs.length&&this.__elementContentTabs.enableContentTabs(),this.__buildComboboxData(),this.__updateSubscription()}}))}}))}__getAxisID(){return this.__axisRefStructure?this.__axisRefStructure.NcToPlc.AxisId:this.__ncAxesIDs[this.__currentAxis??0]}__buildComboboxData(){let commands=[];for(let axisID of this.__ncAxesIDs)commands.push({commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadReq",writeValue:{IndexGroup:16384+axisID,IndexOffset:2,ReadLen:8,Runtime:this.__NC_Ring0_Port_500}});commands.length?TcHmi.Server.request({requestType:"ReadWrite",commands:commands},(data=>{const error=this.__checkServerErrors(data);if(error)return void TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Failed to read axis name. `+TcHmi.Log.buildMessage(error));let srcData=[];for(let command of data.response.commands){if(!command.readValue){TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, `+TcHmi.Log.buildMessage({code:TcHmi.Errors.E_SERVER_READVALUE_MISSING,message:TcHmi.Errors[TcHmi.Errors.E_SERVER_READVALUE_MISSING],reason:"Missing readValue in response from server with id: '"+data.response.id+"'.",domain:this.__type}));continue}const br=new TcHmi.Base64BinaryReader(command.readValue);srcData.push({text:br.readString({encoding:"Windows-1252"}),value:this.__ncAxesIDs.find((id=>16640+id===command.writeValue?.IndexGroup))??null})}this.__ComboboxAxis.setSrcData(srcData),this.__updateSubscription()})):this.__ComboboxAxis.setSrcData(["None"])}__writeToNc(indexGroup,indexOffset,runtime,setValue,datatype){const bw=new TcHmi.Base64BinaryWriter;switch(datatype){case"UInt16":bw.writeUInt16(TcHmi.ValueConverter.toNumber(setValue));break;case"UInt32":bw.writeUInt32(TcHmi.ValueConverter.toNumber(setValue));break;case"Double":bw.writeDouble(TcHmi.ValueConverter.toNumber(setValue))}const wdata=bw.getEncodedString();TcHmi.Server.request({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncWriteReq",writeValue:{IndexGroup:indexGroup,IndexOffset:indexOffset,Runtime:runtime,WriteData:wdata}}]},(data=>{const error=this.__checkServerErrors(data);error&&TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Failed to write indexGroup ${indexGroup} with indexOffset ${indexOffset} to the runtime ${runtime}. `+TcHmi.Log.buildMessage(error))}))}__onMouseDownSet=()=>{TcHmi.Access.checkAccess(this,"operate")&&setTimeout((()=>{this.__enableSet()}))};__enableSet(){if(this.__mcPower)this.__mcPower.Enable=this.__axisUserInput.enabling.controller??this.__axisData.enabling.controller,this.__mcPower.Enable_Negative=this.__axisUserInput.enabling.feedBw??this.__axisData.enabling.feedBw,this.__mcPower.Enable_Positive=this.__axisUserInput.enabling.feedFw??this.__axisData.enabling.feedFw,this.__mcPower.Override=this.__axisUserInput.enabling.override??this.__axisData.enabling.override,this.__writeMcPower(this.__mcPower);else{const indexGroup=17152+this.__getAxisID();this.__writeToNc(indexGroup,2,this.__NC_Task_Port_501??"",this.__axisUserInput.enabling.controller??this.__axisData.enabling.controller,"UInt16"),this.__writeToNc(indexGroup,3,this.__NC_Task_Port_501??"",this.__axisUserInput.enabling.feedFw??this.__axisData.enabling.feedFw,"UInt16"),this.__writeToNc(indexGroup,4,this.__NC_Task_Port_501??"",this.__axisUserInput.enabling.feedBw??this.__axisData.enabling.feedBw,"UInt16"),this.__writeToNc(indexGroup,33,this.__NC_Task_Port_501??"",1e4*(this.__axisUserInput.enabling.override??this.__axisData.enabling.override),"UInt32")}}__onMouseDownAll=()=>{TcHmi.Access.checkAccess(this,"operate")&&this.__enableAll()};__enableAll(){this.__axisUserInput.enabling.controller=!0,this.__axisUserInput.enabling.feedBw=!0,this.__axisUserInput.enabling.feedFw=!0,this.__axisUserInput.enabling.override=100,this.__CheckboxController.setToggleState("Active"),this.__CheckboxFeedFw.setToggleState("Active"),this.__CheckboxFeedBw.setToggleState("Active"),this.__NumericInputOverride.setValue(100),this.__enableSet()}__onComboboxChanged=()=>{TcHmi.Access.checkAccess(this,"operate")&&this.setCurrentAxis(this.__ComboboxAxis.getSelectedIndex()??null)};__onMouseDownStart=()=>{!TcHmi.Access.checkAccess(this,"operate")||this.__mcHalt&&(this.__mcHalt.Execute||this.__mcHalt.Busy)||setTimeout((()=>{this.__mcMoveAbsolute?(this.__mcMoveAbsolute.Execute=!0,this.__mcMoveAbsolute.Velocity=this.__axisUserInput.targetVelocity,this.__mcMoveAbsolute.Position=this.__axisUserInput.targetPosition,this.__mcMoveAbsolute.Acceleration=0,this.__mcMoveAbsolute.Deceleration=0,this.__mcMoveAbsolute.Jerk=0,this.__writeMcMoveAbsolute(this.__mcMoveAbsolute)):this.__axisStart(1,this.__axisUserInput.targetPosition,this.__axisUserInput.targetVelocity,0,0,0)}))};__onMouseDownStop=()=>{TcHmi.Access.checkAccess(this,"operate")&&this.__stopMovement()};__onMouseDownReset=()=>{TcHmi.Access.checkAccess(this,"operate")&&(this.__lastError=0,this.__updateGUI(),this.__mcReset?(this.__mcReset.Execute=!0,this.__writeMcReset(this.__mcReset)):TcHmi.Server.request({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncWriteReq",writeValue:{IndexGroup:16896+this.__getAxisID(),IndexOffset:1,Runtime:this.__NC_Task_Port_501??"",WriteData:""}}]},(data=>{const error=this.__checkServerErrors(data);error&&TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Failed to reset the Axis. `+TcHmi.Log.buildMessage(error))})))};__onMouseDownHome=()=>{TcHmi.Access.checkAccess(this,"operate")&&(this.__mcHome?(this.__mcHome.Execute=!0,this.__writeMcHome(this.__mcHome)):TcHmi.Server.request({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncWriteReq",writeValue:{IndexGroup:16896+this.__getAxisID(),IndexOffset:16,Runtime:this.__NC_Task_Port_501??"",WriteData:""}}]},(data=>{const error=this.__checkServerErrors(data);error&&TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Failed to home the Axis. `+TcHmi.Log.buildMessage(error))})))};__activateMouseDownBlock(){this.__mousedownBlock++,setTimeout((()=>{this.__mousedownBlock--}),1e3)}__onMouseDownPlusPlus=e=>{!TcHmi.Access.checkAccess(this,"operate")||this.__mcHalt&&(this.__mcHalt.Execute||this.__mcHalt.Busy)||0!==this.__mousedownBlock&&e.name.includes(".onMouseDown")||(e.name.includes(".onTouchStart")&&this.__activateMouseDownBlock(),this.__McMoveVelocity?(this.__McMoveVelocity.Execute=!0,this.__McMoveVelocity.Velocity=this.__axisData.manualVelocityFast,this.__McMoveVelocity.Direction=1,this.__writeMcMoveVelocity(this.__McMoveVelocity),!0===this.__McMoveVelocity.Active&&(this.__McMoveVelocity.Execute=!1,this.__writeMcMoveVelocity(this.__McMoveVelocity))):this.__axisStart(3,0,this.__axisData.manualVelocityFast,0,0,0),document.addEventListener("pointerup",this.__onMouseUp,{passive:!0,once:!0}))};__onMouseDownPlus=e=>{!TcHmi.Access.checkAccess(this,"operate")||this.__mcHalt&&(this.__mcHalt.Execute||this.__mcHalt.Busy)||0!==this.__mousedownBlock&&e.name.includes(".onMouseDown")||(e.name.includes(".onTouchStart")&&this.__activateMouseDownBlock(),this.__McMoveVelocity?(this.__McMoveVelocity.Execute=!0,this.__McMoveVelocity.Velocity=this.__axisData.manualVelocitySlow,this.__McMoveVelocity.Direction=1,this.__writeMcMoveVelocity(this.__McMoveVelocity),!0===this.__McMoveVelocity.Active&&(this.__McMoveVelocity.Execute=!1,this.__writeMcMoveVelocity(this.__McMoveVelocity))):this.__axisStart(3,0,this.__axisData.manualVelocitySlow,0,0,0),document.addEventListener("pointerup",this.__onMouseUp,{passive:!0,once:!0}))};__onMouseDownMinusMinus=e=>{!TcHmi.Access.checkAccess(this,"operate")||this.__mcHalt&&(this.__mcHalt.Execute||this.__mcHalt.Busy)||0!==this.__mousedownBlock&&e.name.includes(".onMouseDown")||(e.name.includes(".onTouchStart")&&this.__activateMouseDownBlock(),this.__McMoveVelocity?(this.__McMoveVelocity.Execute=!0,this.__McMoveVelocity.Velocity=this.__axisData.manualVelocityFast,this.__McMoveVelocity.Direction=3,this.__writeMcMoveVelocity(this.__McMoveVelocity),!0===this.__McMoveVelocity.Active&&(this.__McMoveVelocity.Execute=!1,this.__writeMcMoveVelocity(this.__McMoveVelocity))):this.__axisStart(4,0,this.__axisData.manualVelocityFast,0,0,0),document.addEventListener("pointerup",this.__onMouseUp,{passive:!0,once:!0}))};__onMouseDownMinus=e=>{!TcHmi.Access.checkAccess(this,"operate")||this.__mcHalt&&(this.__mcHalt.Execute||this.__mcHalt.Busy)||0!==this.__mousedownBlock&&e.name.includes(".onMouseDown")||(e.name.includes(".onTouchStart")&&this.__activateMouseDownBlock(),this.__McMoveVelocity?(this.__McMoveVelocity.Execute=!0,this.__McMoveVelocity.Velocity=this.__axisData.manualVelocitySlow,this.__McMoveVelocity.Direction=3,this.__writeMcMoveVelocity(this.__McMoveVelocity),!0===this.__McMoveVelocity.Active&&(this.__McMoveVelocity.Execute=!1,this.__writeMcMoveVelocity(this.__McMoveVelocity))):this.__axisStart(4,0,this.__axisData.manualVelocitySlow,0,0,0),document.addEventListener("pointerup",this.__onMouseUp,{passive:!0,once:!0}))};__onMouseUp=()=>{this.__stopMovement()};__stopMovement(){this.__mcHalt?(!0===this.__mcHalt.Execute?this.__mcHalt.Execute=!1:this.__mcHalt.Execute=!0,this.__writeMcHalt(this.__mcHalt)):this.__axisStart(8192,0,0,0,0,0),this.__McMoveVelocity&&(this.__McMoveVelocity.Execute=!1,this.__McMoveVelocity.Velocity=0,this.__writeMcMoveVelocity(this.__McMoveVelocity)),this.__mcMoveAbsolute&&(this.__mcMoveAbsolute.Execute=!1,this.__mcMoveAbsolute.Velocity=0,this.__writeMcMoveAbsolute(this.__mcMoveAbsolute))}__onChangeFeedBw=()=>{TcHmi.Access.checkAccess(this,"operate")&&(this.__axisUserInput.enabling.feedBw="Active"===this.__CheckboxFeedBw.getToggleState(),this.__CheckboxFeedBw.getElement()[0].classList.toggle("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-user-input",this.__axisUserInput.enabling.feedBw!==this.__axisData.enabling.feedBw))};__onChangeFeedFw=()=>{TcHmi.Access.checkAccess(this,"operate")&&(this.__axisUserInput.enabling.feedFw="Active"===this.__CheckboxFeedFw.getToggleState(),this.__CheckboxFeedFw.getElement()[0].classList.toggle("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-user-input",this.__axisUserInput.enabling.feedFw!==this.__axisData.enabling.feedFw))};__onChangeController=()=>{TcHmi.Access.checkAccess(this,"operate")&&(this.__axisUserInput.enabling.controller="Active"===this.__CheckboxController.getToggleState(),this.__CheckboxController.getElement()[0].classList.toggle("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-user-input",this.__axisUserInput.enabling.controller!==this.__axisData.enabling.controller))};__onChangeOverride=()=>{if(!TcHmi.Access.checkAccess(this,"operate"))return;let value=this.__NumericInputOverride.getValue();this.__axisUserInput.enabling.override=value&&"bigint"!=typeof value?value:0,this.__NumericInputOverride.getElement()[0].classList.toggle("TcHmi_Controls_Beckhoff_TcHmiMotion_TcHmiMotionControl-user-input",this.__axisUserInput.enabling.override!==this.__axisData.enabling.override)};__onChangeTargetPos=()=>{if(!TcHmi.Access.checkAccess(this,"operate"))return;let value=this.__NumericInputTargetPos.getValue();this.__axisUserInput.targetPosition=value&&"bigint"!=typeof value?value:0};__onChangeTargetVel=()=>{if(!TcHmi.Access.checkAccess(this,"operate"))return;let value=this.__NumericInputTargetVel.getValue();this.__axisUserInput.targetVelocity=value&&"bigint"!=typeof value?value:0};__onUserDataChanged=()=>{this.__checkAccess()};__checkAccess(){const enable=TcHmi.Access.checkAccess(this,"operate")??!1;this.__NumericInputTargetPos.setIsEnabled(enable),this.__NumericInputTargetVel.setIsEnabled(enable),this.__CheckboxFeedBw.setIsEnabled(enable),this.__CheckboxFeedFw.setIsEnabled(enable),this.__CheckboxController.setIsEnabled(enable),this.__NumericInputOverride.setIsEnabled(enable),this.__ButtonSetEnablingAll.setIsEnabled(enable),this.__ButtonSetEnabling.setIsEnabled(enable),this.__ButtonMinus.setIsEnabled(enable),this.__ButtonMinusMinus.setIsEnabled(enable),this.__ButtonPlus.setIsEnabled(enable),this.__ButtonPlusPlus.setIsEnabled(enable),this.__ButtonStop.setIsEnabled(enable),this.__ButtonStart.setIsEnabled(enable),this.__ButtonReset.setIsEnabled(enable),this.__ButtonHoming.setIsEnabled(enable)}__updateAnimation(){for(const element of this.__elementAnimationBackwards)element.classList.toggle("Animation-Running",this.__axisData.statusLog.movingBw);for(const element of this.__elementAnimationForwards)element.classList.toggle("Animation-Running",this.__axisData.statusLog.movingFw)}__axisStart(startmode,targetPosition,targetVelocity,acceleration,decelleration,jerk){let bw=new TcHmi.Base64BinaryWriter;bw.writeUInt32(startmode),bw.writeUInt32(0),bw.writeDouble(targetPosition),bw.writeDouble(targetVelocity),bw.writeDouble(acceleration),bw.writeDouble(decelleration),bw.writeDouble(jerk),bw.writeDouble(0),bw.writeDouble(0),bw.writeDouble(0),bw.writeDouble(0);let wdata=bw.getEncodedString();const axisID=this.__getAxisID();TcHmi.Server.request({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncReadWriteReq",writeValue:{IndexGroup:16896+axisID,IndexOffset:22,ReadLen:4,Runtime:this.__NC_Task_Port_501??"",WriteData:wdata}}]},(data=>{const error=this.__checkServerErrors(data);if(error)return this.__lastError=error.code,this.__updateGUI(),void TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Failed to start the Axis ${axisID} in start mode ${startmode}. `+TcHmi.Log.buildMessage(error));if(this.__lastError=0,this.__updateGUI(),data.response.commands[0].readValue){const br=new TcHmi.Base64BinaryReader(data.response.commands[0].readValue);return br.readUInt16(),br.readUInt16()}return 0}))}__axisStartReversingSequence(targetPosition1,targetVelocity,targetPosition2,idleTime){let bw=new TcHmi.Base64BinaryWriter;bw.writeDouble(1),bw.writeDouble(targetPosition1),bw.writeDouble(targetPosition2),bw.writeDouble(targetVelocity),bw.writeDouble(idleTime);let wdata=bw.getEncodedString();const axisID=this.__getAxisID();TcHmi.Server.request({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncWriteReq",writeValue:{IndexGroup:16896+axisID,IndexOffset:37,Runtime:this.__NC_Task_Port_501??"",WriteData:wdata}}]},(data=>{const error=this.__checkServerErrors(data);if(error)return this.__lastError=error.code,this.__updateGUI(),void TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Failed to start the Axis ${axisID} in reversing sequence. `+TcHmi.Log.buildMessage(error));if(this.__lastError=0,this.__updateGUI(),data.response.commands[0].readValue){const br=new TcHmi.Base64BinaryReader(data.response.commands[0].readValue);return br.readUInt16(),br.readUInt16()}return 0}))}__axisStartVeloStepSequence(targetVelocity1,targetVelocity2,drivingTime,idleTime,noOfCycles){let bw=new TcHmi.Base64BinaryWriter;bw.writeDouble(1),bw.writeDouble(targetVelocity1),bw.writeDouble(targetVelocity2),bw.writeDouble(drivingTime),bw.writeDouble(idleTime),bw.writeDouble(noOfCycles);let wdata=bw.getEncodedString();const axisID=this.__getAxisID();TcHmi.Server.request({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncWriteReq",writeValue:{IndexGroup:16896+axisID,IndexOffset:50,ReadLen:0,Runtime:this.__NC_Task_Port_501??"",WriteData:wdata}}]},(data=>{const error=this.__checkServerErrors(data);if(error)return this.__lastError=error.code,this.__updateGUI(),void TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Failed to start the Axis ${axisID} in velo step sequence. `+TcHmi.Log.buildMessage(error));if(this.__lastError=0,this.__updateGUI(),data.response.commands[0].readValue){const br=new TcHmi.Base64BinaryReader(data.response.commands[0].readValue);return br.readUInt16(),br.readUInt16()}return 0}))}__axisStartSinusOscillation(baseAmplitude,baseFrequency,StartAmplitude,feedConstantMoter,startFrequency,stopFrequency,drivingTime,noOfCycles){let bw=new TcHmi.Base64BinaryWriter;bw.writeDouble(1),bw.writeDouble(baseAmplitude),bw.writeDouble(baseFrequency),bw.writeDouble(StartAmplitude),bw.writeDouble(feedConstantMoter),bw.writeDouble(startFrequency),bw.writeDouble(stopFrequency),bw.writeDouble(drivingTime),bw.writeUInt32(noOfCycles),bw.writeUInt32(0);let wdata=bw.getEncodedString();const axisID=this.__getAxisID();TcHmi.Server.request({requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"ADS.AdsSyncWriteReq",writeValue:{IndexGroup:16896+axisID,IndexOffset:51,ReadLen:0,Runtime:this.__NC_Task_Port_501??"",WriteData:wdata}}]},(data=>{const error=this.__checkServerErrors(data);if(error)return this.__lastError=error.code,this.__updateGUI(),void TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Failed to start the Axis ${axisID} in sinus oscillation. `+TcHmi.Log.buildMessage(error));if(this.__lastError=0,this.__updateGUI(),data.response.commands[0].readValue){const br=new TcHmi.Base64BinaryReader(data.response.commands[0].readValue);return br.readUInt16(),br.readUInt16()}return 0}))}__onStartModeChanged=()=>{this.__ExtendedStartModeInput1.setValue(0),this.__ExtendedStartModeInput2.setValue(0),this.__ExtendedStartModeInput3.setValue(0),this.__ExtendedStartModeInput4.setValue(0),this.__ExtendedStartModeInput5.setValue(0);switch(this.__ComboboxStartMode.getText()){case"Absolute":case"Relative":case"Modulo":case"Modulo shortest way":case"Modulo plus direct":case"Modulo minus direct":this.__ExtendedStartModeInput4.setVisibility("Visible"),this.__ExtendedStartModeInput5.setVisibility("Visible"),this.__ExtendedStartModeLabel4.style.visibility="visible",this.__ExtendedStartModeLabel5.style.visibility="visible",this.__ExtendedStartModeCheckbox2.setVisibility("Collapsed"),this.__ExtendedStartModeCheckbox3.setVisibility("Visible"),this.__ExtendedStartModeCheckbox4.setVisibility("Visible"),this.__ExtendedStartModeCheckbox5.setVisibility("Visible"),this.__ExtendedStartModeOptional2.classList.add("non-optional"),this.__ExtendedStartModeOptional3.classList.remove("non-optional"),this.__ExtendedStartModeOptional4.classList.remove("non-optional"),this.__ExtendedStartModeOptional5.classList.remove("non-optional"),this.__ExtendedStartModeInput2.setIsEnabled(!0),this.__ExtendedStartModeInput3.setIsEnabled("Active"===this.__ExtendedStartModeCheckbox3.getToggleState()),this.__ExtendedStartModeInput4.setIsEnabled("Active"===this.__ExtendedStartModeCheckbox4.getToggleState()),this.__ExtendedStartModeInput5.setIsEnabled("Active"===this.__ExtendedStartModeCheckbox5.getToggleState()),this.__removeLocalizedElement(this.__ExtendedStartModeLabel1),this.__removeLocalizedElement(this.__ExtendedStartModeLabel2),this.__removeLocalizedElement(this.__ExtendedStartModeLabel3),this.__removeLocalizedElement(this.__ExtendedStartModeLabel4),this.__removeLocalizedElement(this.__ExtendedStartModeLabel5),this.__addLocalizedElement(this.__ExtendedStartModeLabel1,"TargetPosition"),this.__addLocalizedElement(this.__ExtendedStartModeLabel2,"TargetVelocity"),this.__addLocalizedElement(this.__ExtendedStartModeLabel3,"Acceleration"),this.__addLocalizedElement(this.__ExtendedStartModeLabel4,"Deceleration"),this.__addLocalizedElement(this.__ExtendedStartModeLabel5,"Jerk"),this.__ExtendedStartModeInput1.setMinValue(null),this.__ExtendedStartModeInput1.setMaxValue(null),this.__ExtendedStartModeInput1.setDecimalDigits(null),this.__ExtendedStartModeInput2.setMinValue(.001),this.__ExtendedStartModeInput2.setMaxValue(Math.min(this.__axisData.referenceVeloctiy,this.__axisData.maxVelocity)),this.__ExtendedStartModeInput2.setDecimalDigits(null),this.__ExtendedStartModeInput3.setMinValue(0),this.__ExtendedStartModeInput3.setMaxValue(this.__axisData.maxAcceleration),this.__ExtendedStartModeInput3.setDecimalDigits(null),this.__ExtendedStartModeInput4.setMinValue(0),this.__ExtendedStartModeInput4.setMaxValue(this.__axisData.maxDeceleration),this.__ExtendedStartModeInput4.setDecimalDigits(null),this.__ExtendedStartModeInput5.setMinValue(0),this.__ExtendedStartModeInput5.setMaxValue(null),this.__ExtendedStartModeInput5.setDecimalDigits(null);break;case"Endless +":case"Endless -":case"Jog +":case"Jog -":case"+ 1":case"+ 0.1":case"+ 0.01":case"+ 0.001":case"- 1":case"- 0.1":case"- 0.01":case"- 0.001":this.__ExtendedStartModeInput3.setVisibility("Visible"),this.__ExtendedStartModeInput4.setVisibility("Visible"),this.__ExtendedStartModeInput5.setVisibility("Collapsed"),this.__ExtendedStartModeLabel3.style.visibility="visible",this.__ExtendedStartModeLabel4.style.visibility="visible",this.__ExtendedStartModeLabel5.style.visibility="collapse",this.__ExtendedStartModeCheckbox2.setVisibility("Visible"),this.__ExtendedStartModeCheckbox3.setVisibility("Visible"),this.__ExtendedStartModeCheckbox4.setVisibility("Visible"),this.__ExtendedStartModeCheckbox5.setVisibility("Collapsed"),this.__ExtendedStartModeOptional2.classList.remove("non-optional"),this.__ExtendedStartModeOptional3.classList.remove("non-optional"),this.__ExtendedStartModeOptional4.classList.remove("non-optional"),this.__ExtendedStartModeOptional5.classList.remove("non-optional"),this.__ExtendedStartModeInput2.setIsEnabled("Active"===this.__ExtendedStartModeCheckbox2.getToggleState()),this.__ExtendedStartModeInput3.setIsEnabled("Active"===this.__ExtendedStartModeCheckbox3.getToggleState()),this.__ExtendedStartModeInput4.setIsEnabled("Active"===this.__ExtendedStartModeCheckbox4.getToggleState()),this.__removeLocalizedElement(this.__ExtendedStartModeLabel1),this.__removeLocalizedElement(this.__ExtendedStartModeLabel2),this.__removeLocalizedElement(this.__ExtendedStartModeLabel3),this.__removeLocalizedElement(this.__ExtendedStartModeLabel4),this.__addLocalizedElement(this.__ExtendedStartModeLabel1,"TargetVelocity"),this.__addLocalizedElement(this.__ExtendedStartModeLabel2,"Acceleration"),this.__addLocalizedElement(this.__ExtendedStartModeLabel3,"Deceleration"),this.__addLocalizedElement(this.__ExtendedStartModeLabel4,"Jerk"),this.__ExtendedStartModeInput1.setMinValue(0),this.__ExtendedStartModeInput1.setMaxValue(Math.min(this.__axisData.referenceVeloctiy,this.__axisData.maxVelocity)),this.__ExtendedStartModeInput1.setDecimalDigits(null),this.__ExtendedStartModeInput2.setMinValue(0),this.__ExtendedStartModeInput2.setMaxValue(this.__axisData.maxAcceleration),this.__ExtendedStartModeInput2.setDecimalDigits(null),this.__ExtendedStartModeInput3.setMinValue(0),this.__ExtendedStartModeInput3.setMaxValue(this.__axisData.maxDeceleration),this.__ExtendedStartModeInput3.setDecimalDigits(null),this.__ExtendedStartModeInput4.setMinValue(0),this.__ExtendedStartModeInput4.setMaxValue(null),this.__ExtendedStartModeInput4.setDecimalDigits(null);break;case"Reversing Sequence":this.__ExtendedStartModeInput4.setVisibility("Visible"),this.__ExtendedStartModeLabel4.style.visibility="visible",this.__ExtendedStartModeInput5.setVisibility("Collapsed"),this.__ExtendedStartModeLabel5.style.visibility="collapse",this.__ExtendedStartModeCheckbox2.setVisibility("Collapsed"),this.__ExtendedStartModeCheckbox3.setVisibility("Collapsed"),this.__ExtendedStartModeCheckbox4.setVisibility("Collapsed"),this.__ExtendedStartModeCheckbox5.setVisibility("Collapsed"),this.__ExtendedStartModeOptional2.classList.add("non-optional"),this.__ExtendedStartModeOptional3.classList.add("non-optional"),this.__ExtendedStartModeOptional4.classList.add("non-optional"),this.__ExtendedStartModeInput2.setIsEnabled(!0),this.__ExtendedStartModeInput3.setIsEnabled(!0),this.__ExtendedStartModeInput4.setIsEnabled(!0),this.__removeLocalizedElement(this.__ExtendedStartModeLabel1),this.__removeLocalizedElement(this.__ExtendedStartModeLabel2),this.__removeLocalizedElement(this.__ExtendedStartModeLabel3),this.__removeLocalizedElement(this.__ExtendedStartModeLabel4),this.__addLocalizedElement(this.__ExtendedStartModeLabel1,"TargetPosition1"),this.__addLocalizedElement(this.__ExtendedStartModeLabel2,"TargetVelocity"),this.__addLocalizedElement(this.__ExtendedStartModeLabel3,"TargetPosition2"),this.__addLocalizedElement(this.__ExtendedStartModeLabel4,"IdleTime"),this.__ExtendedStartModeInput1.setMinValue(null),this.__ExtendedStartModeInput1.setMaxValue(null),this.__ExtendedStartModeInput1.setDecimalDigits(null),this.__ExtendedStartModeInput2.setMinValue(null),this.__ExtendedStartModeInput2.setMaxValue(Math.min(this.__axisData.referenceVeloctiy,this.__axisData.maxVelocity)),this.__ExtendedStartModeInput2.setDecimalDigits(null),this.__ExtendedStartModeInput3.setMinValue(0),this.__ExtendedStartModeInput3.setMaxValue(null),this.__ExtendedStartModeInput3.setDecimalDigits(null),this.__ExtendedStartModeInput4.setMinValue(0),this.__ExtendedStartModeInput4.setMaxValue(null),this.__ExtendedStartModeInput4.setDecimalDigits(null);break;case"Start/Stop Sequence":this.__ExtendedStartModeInput4.setVisibility("Collapsed"),this.__ExtendedStartModeLabel4.style.visibility="collapse",this.__ExtendedStartModeInput5.setVisibility("Collapsed"),this.__ExtendedStartModeLabel5.style.visibility="collapse",this.__ExtendedStartModeCheckbox2.setVisibility("Collapsed"),this.__ExtendedStartModeCheckbox4.setVisibility("Collapsed"),this.__ExtendedStartModeCheckbox3.setVisibility("Collapsed"),this.__ExtendedStartModeCheckbox5.setVisibility("Collapsed"),this.__ExtendedStartModeOptional2.classList.add("non-optional"),this.__ExtendedStartModeOptional3.classList.add("non-optional"),this.__ExtendedStartModeInput2.setIsEnabled(!0),this.__ExtendedStartModeInput3.setIsEnabled(!0),this.__removeLocalizedElement(this.__ExtendedStartModeLabel1),this.__removeLocalizedElement(this.__ExtendedStartModeLabel2),this.__removeLocalizedElement(this.__ExtendedStartModeLabel3),this.__addLocalizedElement(this.__ExtendedStartModeLabel1,"TargetPosition"),this.__addLocalizedElement(this.__ExtendedStartModeLabel2,"TargetVelocity"),this.__addLocalizedElement(this.__ExtendedStartModeLabel3,"IdleTime"),this.__ExtendedStartModeInput1.setMinValue(null),this.__ExtendedStartModeInput1.setMaxValue(null),this.__ExtendedStartModeInput1.setDecimalDigits(null),this.__ExtendedStartModeInput2.setMinValue(null),this.__ExtendedStartModeInput2.setMaxValue(Math.min(this.__axisData.referenceVeloctiy,this.__axisData.maxVelocity)),this.__ExtendedStartModeInput2.setDecimalDigits(null),this.__ExtendedStartModeInput3.setMinValue(0),this.__ExtendedStartModeInput3.setMaxValue(null),this.__ExtendedStartModeInput3.setDecimalDigits(null);break;case"Velo Step Sequence":this.__ExtendedStartModeInput4.setVisibility("Visible"),this.__ExtendedStartModeInput5.setVisibility("Visible"),this.__ExtendedStartModeLabel4.style.visibility="visible",this.__ExtendedStartModeLabel5.style.visibility="visible",this.__ExtendedStartModeCheckbox2.setVisibility("Collapsed"),this.__ExtendedStartModeCheckbox3.setVisibility("Collapsed"),this.__ExtendedStartModeCheckbox4.setVisibility("Collapsed"),this.__ExtendedStartModeCheckbox5.setVisibility("Collapsed"),this.__ExtendedStartModeOptional2.classList.add("non-optional"),this.__ExtendedStartModeOptional3.classList.add("non-optional"),this.__ExtendedStartModeOptional4.classList.add("non-optional"),this.__ExtendedStartModeOptional5.classList.add("non-optional"),this.__ExtendedStartModeInput2.setIsEnabled(!0),this.__ExtendedStartModeInput3.setIsEnabled(!0),this.__ExtendedStartModeInput4.setIsEnabled(!0),this.__ExtendedStartModeInput5.setIsEnabled(!0),this.__removeLocalizedElement(this.__ExtendedStartModeLabel1),this.__removeLocalizedElement(this.__ExtendedStartModeLabel2),this.__removeLocalizedElement(this.__ExtendedStartModeLabel3),this.__removeLocalizedElement(this.__ExtendedStartModeLabel4),this.__removeLocalizedElement(this.__ExtendedStartModeLabel5),this.__addLocalizedElement(this.__ExtendedStartModeLabel1,"TargetVelocity1"),this.__addLocalizedElement(this.__ExtendedStartModeLabel2,"TargetVelocity2"),this.__addLocalizedElement(this.__ExtendedStartModeLabel3,"DrivingTime"),this.__addLocalizedElement(this.__ExtendedStartModeLabel4,"IdleTime"),this.__addLocalizedElement(this.__ExtendedStartModeLabel5,"NoOfCycles"),this.__ExtendedStartModeInput1.setMinValue(-Math.min(this.__axisData.referenceVeloctiy,this.__axisData.maxVelocity)),this.__ExtendedStartModeInput1.setMaxValue(Math.min(this.__axisData.referenceVeloctiy,this.__axisData.maxVelocity)),this.__ExtendedStartModeInput1.setDecimalDigits(null),this.__ExtendedStartModeInput2.setMinValue(-Math.min(this.__axisData.referenceVeloctiy,this.__axisData.maxVelocity)),this.__ExtendedStartModeInput2.setMaxValue(Math.min(this.__axisData.referenceVeloctiy,this.__axisData.maxVelocity)),this.__ExtendedStartModeInput2.setDecimalDigits(null),this.__ExtendedStartModeInput3.setMinValue(1e-6),this.__ExtendedStartModeInput3.setMaxValue(null),this.__ExtendedStartModeInput3.setDecimalDigits(null),this.__ExtendedStartModeInput4.setMinValue(0),this.__ExtendedStartModeInput4.setMaxValue(null),this.__ExtendedStartModeInput4.setDecimalDigits(null),this.__ExtendedStartModeInput5.setMinValue(0),this.__ExtendedStartModeInput5.setMaxValue(null),this.__ExtendedStartModeInput5.setDecimalDigits(0);break;case"Sinus Sequence (Bode)":this.__ExtendedStartModeInput4.setVisibility("Visible"),this.__ExtendedStartModeInput5.setVisibility("Visible"),this.__ExtendedStartModeLabel4.style.visibility="visible",this.__ExtendedStartModeLabel5.style.visibility="visible",this.__ExtendedStartModeCheckbox2.setVisibility("Collapsed"),this.__ExtendedStartModeCheckbox3.setVisibility("Collapsed"),this.__ExtendedStartModeCheckbox4.setVisibility("Collapsed"),this.__ExtendedStartModeCheckbox5.setVisibility("Collapsed"),this.__ExtendedStartModeOptional2.classList.add("non-optional"),this.__ExtendedStartModeOptional3.classList.add("non-optional"),this.__ExtendedStartModeOptional4.classList.add("non-optional"),this.__ExtendedStartModeOptional5.classList.add("non-optional"),this.__ExtendedStartModeInput2.setIsEnabled(!0),this.__ExtendedStartModeInput3.setIsEnabled(!0),this.__ExtendedStartModeInput4.setIsEnabled(!0),this.__ExtendedStartModeInput5.setIsEnabled(!0),this.__removeLocalizedElement(this.__ExtendedStartModeLabel1),this.__removeLocalizedElement(this.__ExtendedStartModeLabel2),this.__removeLocalizedElement(this.__ExtendedStartModeLabel3),this.__removeLocalizedElement(this.__ExtendedStartModeLabel4),this.__removeLocalizedElement(this.__ExtendedStartModeLabel5),this.__addLocalizedElement(this.__ExtendedStartModeLabel1,"StartFrequency"),this.__addLocalizedElement(this.__ExtendedStartModeLabel2,"StopFrequency"),this.__addLocalizedElement(this.__ExtendedStartModeLabel3,"FrequencySteps"),this.__addLocalizedElement(this.__ExtendedStartModeLabel4,"SinusBaseVelocity"),this.__addLocalizedElement(this.__ExtendedStartModeLabel5,"FeedConstantMotor"),this.__ExtendedStartModeInput1.setMinValue(0),this.__ExtendedStartModeInput1.setMaxValue(null),this.__ExtendedStartModeInput1.setDecimalDigits(null),this.__ExtendedStartModeInput2.setMinValue(0),this.__ExtendedStartModeInput2.setMaxValue(null),this.__ExtendedStartModeInput2.setDecimalDigits(null),this.__ExtendedStartModeInput3.setMinValue(0),this.__ExtendedStartModeInput3.setMaxValue(null),this.__ExtendedStartModeInput3.setDecimalDigits(null),this.__ExtendedStartModeInput4.setMinValue(0),this.__ExtendedStartModeInput4.setMaxValue(null),this.__ExtendedStartModeInput4.setDecimalDigits(null),this.__ExtendedStartModeInput5.setMinValue(1e-6),this.__ExtendedStartModeInput5.setMaxValue(null),this.__ExtendedStartModeInput5.setDecimalDigits(null);break;case"Sinus Oscillation":this.__ExtendedStartModeInput4.setVisibility("Collapsed"),this.__ExtendedStartModeInput5.setVisibility("Collapsed"),this.__ExtendedStartModeLabel4.style.visibility="collapse",this.__ExtendedStartModeLabel5.style.visibility="collapse",this.__ExtendedStartModeCheckbox2.setVisibility("Collapsed"),this.__ExtendedStartModeCheckbox3.setVisibility("Collapsed"),this.__ExtendedStartModeCheckbox4.setVisibility("Collapsed"),this.__ExtendedStartModeCheckbox5.setVisibility("Collapsed"),this.__ExtendedStartModeOptional2.classList.add("non-optional"),this.__ExtendedStartModeOptional3.classList.add("non-optional"),this.__ExtendedStartModeInput2.setIsEnabled(!0),this.__ExtendedStartModeInput3.setIsEnabled(!0),this.__removeLocalizedElement(this.__ExtendedStartModeLabel1),this.__removeLocalizedElement(this.__ExtendedStartModeLabel2),this.__removeLocalizedElement(this.__ExtendedStartModeLabel3),this.__addLocalizedElement(this.__ExtendedStartModeLabel1,"Frequency"),this.__addLocalizedElement(this.__ExtendedStartModeLabel2,"SinusVelocityAmplitude"),this.__addLocalizedElement(this.__ExtendedStartModeLabel3,"DrivingTime"),this.__ExtendedStartModeInput1.setMinValue(0),this.__ExtendedStartModeInput1.setMaxValue(10),this.__ExtendedStartModeInput1.setDecimalDigits(null),this.__ExtendedStartModeInput2.setMinValue(0),this.__ExtendedStartModeInput2.setMaxValue(null),this.__ExtendedStartModeInput2.setDecimalDigits(null),this.__ExtendedStartModeInput3.setMinValue(0),this.__ExtendedStartModeInput3.setMaxValue(null),this.__ExtendedStartModeInput3.setDecimalDigits(null)}this.__setExtendedStartModeUnits()};__setExtendedStartModeUnits(){switch(this.__ComboboxStartMode.getText()){case"Absolute":case"Relative":case"Modulo":case"Modulo shortest way":case"Modulo plus direct":case"Modulo minus direct":this.__ExtendedStartModeInput1.setUnit(this.__baseUnit),this.__ExtendedStartModeInput2.setUnit(this.__baseUnit+"/s"),this.__ExtendedStartModeInput3.setUnit(this.__baseUnit+"/s²"),this.__ExtendedStartModeInput4.setUnit(this.__baseUnit+"/s²"),this.__ExtendedStartModeInput5.setUnit(this.__baseUnit+"/s³");break;case"Endless +":case"Endless -":case"Jog +":case"Jog -":case"+ 1":case"+ 0.1":case"+ 0.01":case"+ 0.001":case"- 1":case"- 0.1":case"- 0.01":case"- 0.001":this.__ExtendedStartModeInput1.setUnit(this.__baseUnit+"/s"),this.__ExtendedStartModeInput2.setUnit(this.__baseUnit+"/s²"),this.__ExtendedStartModeInput3.setUnit(this.__baseUnit+"/s²"),this.__ExtendedStartModeInput4.setUnit(this.__baseUnit+"/s³");break;case"Reversing Sequence":this.__ExtendedStartModeInput1.setUnit(this.__baseUnit),this.__ExtendedStartModeInput2.setUnit(this.__baseUnit+"/s"),this.__ExtendedStartModeInput3.setUnit(this.__baseUnit),this.__ExtendedStartModeInput4.setUnit("s");break;case"Start/Stop Sequence":this.__ExtendedStartModeInput1.setUnit(this.__baseUnit),this.__ExtendedStartModeInput2.setUnit(this.__baseUnit+"/s"),this.__ExtendedStartModeInput3.setUnit("s");break;case"Velo Step Sequence":this.__ExtendedStartModeInput1.setUnit(this.__baseUnit+"/s"),this.__ExtendedStartModeInput2.setUnit(this.__baseUnit+"/s"),this.__ExtendedStartModeInput3.setUnit("s"),this.__ExtendedStartModeInput4.setUnit("s"),this.__ExtendedStartModeInput5.setUnit(null);break;case"Sinus Sequence (Bode)":this.__ExtendedStartModeInput1.setUnit("Hz"),this.__ExtendedStartModeInput2.setUnit("Hz"),this.__ExtendedStartModeInput4.setUnit(this.__baseUnit+"/s"),this.__ExtendedStartModeInput5.setUnit(this.__baseUnit+"/Rev");break;case"Sinus Oscillation":this.__ExtendedStartModeInput1.setUnit("Hz"),this.__ExtendedStartModeInput2.setUnit(this.__baseUnit+"/s"),this.__ExtendedStartModeInput3.setUnit("s")}}__onMouseDownStartExtendedMode=()=>{!TcHmi.Access.checkAccess(this,"operate")||this.__mcHalt&&(this.__mcHalt.Execute||this.__mcHalt.Busy)||setTimeout((()=>{const startmode=this.__ComboboxStartMode.getText();let v1=this.__ExtendedStartModeInput1.getValue(),v2=this.__ExtendedStartModeInput2.getIsEnabled()?this.__ExtendedStartModeInput2.getValue():0,v3=this.__ExtendedStartModeInput3.getIsEnabled()?this.__ExtendedStartModeInput3.getValue():0,v4=this.__ExtendedStartModeInput4.getIsEnabled()?this.__ExtendedStartModeInput4.getValue():0,v5=this.__ExtendedStartModeInput5.getIsEnabled()?this.__ExtendedStartModeInput5.getValue():0;const value1=v1&&"bigint"!=typeof v1?v1:0,value2=v2&&"bigint"!=typeof v2?v2:0,value3=v3&&"bigint"!=typeof v3?v3:0,value4=v4&&"bigint"!=typeof v4?v4:0,value5=v5&&"bigint"!=typeof v5?v5:0;switch(startmode){case"Absolute":this.__axisRefStructure&&this.__mcMoveAbsolute?(this.__mcMoveAbsolute.Execute=!0,this.__mcMoveAbsolute.Position=value1,this.__mcMoveAbsolute.Velocity=value2,this.__mcMoveAbsolute.Acceleration=value3,this.__mcMoveAbsolute.Deceleration=value4,this.__mcMoveAbsolute.Jerk=value5,this.__writeMcMoveAbsolute(this.__mcMoveAbsolute)):this.__axisStart(1,value1,value2,value3,value4,value5);break;case"Relative":this.__axisStart(2,value1,value2,value3,value4,value5);break;case"Endless +":this.__axisStart(3,0,value1,value2,value3,value4);break;case"Endless -":this.__axisStart(4,0,value1,value2,value3,value4);break;case"Modulo":this.__axisStart(5,value1,value2,value3,value4,value5);break;case"Modulo shortest way":this.__axisStart(261,value1,value2,value3,value4,value5);break;case"Modulo plus direct":this.__axisStart(517,value1,value2,value3,value4,value5);break;case"Modulo minus direct":this.__axisStart(773,value1,value2,value3,value4,value5);break;case"Jog +":this.__axisStart(2,5,value1,value2,value3,value4);break;case"Jog -":this.__axisStart(2,-5,value1,value2,value3,value4);break;case"+ 1":this.__axisStart(2,1,value1,value2,value3,value4);break;case"+ 0.1":this.__axisStart(2,.1,value1,value2,value3,value4);break;case"+ 0.01":this.__axisStart(2,.01,value1,value2,value3,value4);break;case"+ 0.001":this.__axisStart(2,.001,value1,value2,value3,value4);break;case"- 1":this.__axisStart(2,-1,value1,value2,value3,value4);break;case"- 0.1":this.__axisStart(2,-.1,value1,value2,value3,value4);break;case"- 0.01":this.__axisStart(2,-.01,value1,value2,value3,value4);break;case"- 0.001":this.__axisStart(2,-.001,value1,value2,value3,value4);break;case"Reversing Sequence":this.__axisStartReversingSequence(value1,value2,value3,value4);break;case"Start/Stop Sequence":break;case"Velo Step Sequence":this.__axisStartVeloStepSequence(value1,value2,value3,value4,value5);break;case"Sinus Sequence (Bode)":this.__axisStartSinusOscillation(value4,1,value4,value5,value1,value2,1,value3);break;case"Sinus Oscillation":this.__axisStartSinusOscillation(value2,value1,value2,1,0,0,value3,0)}}))};__onChangeExtendedStartModeCheckbox2=()=>{switch(this.__ComboboxStartMode.getText()){case"Absolute":case"Relative":case"Endless +":case"Endless -":case"Modulo":case"Modulo shortest way":case"Modulo plus direct":case"Modulo minus direct":case"Jog +":case"Jog -":case"+ 1":case"+ 0.1":case"+ 0.01":case"+ 0.001":case"- 1":case"- 0.1":case"- 0.01":case"- 0.001":this.__ExtendedStartModeInput2.setIsEnabled("Active"===this.__ExtendedStartModeCheckbox2.getToggleState())}};__onChangeExtendedStartModeCheckbox3=()=>{switch(this.__ComboboxStartMode.getText()){case"Absolute":case"Relative":case"Endless +":case"Endless -":case"Modulo":case"Modulo shortest way":case"Modulo plus direct":case"Modulo minus direct":case"Jog +":case"Jog -":case"+ 1":case"+ 0.1":case"+ 0.01":case"+ 0.001":case"- 1":case"- 0.1":case"- 0.01":case"- 0.001":this.__ExtendedStartModeInput3.setIsEnabled("Active"===this.__ExtendedStartModeCheckbox3.getToggleState())}};__onChangeExtendedStartModeCheckbox4=()=>{switch(this.__ComboboxStartMode.getText()){case"Absolute":case"Relative":case"Endless +":case"Endless -":case"Modulo":case"Modulo shortest way":case"Modulo plus direct":case"Modulo minus direct":case"Jog +":case"Jog -":case"+ 1":case"+ 0.1":case"+ 0.01":case"+ 0.001":case"- 1":case"- 0.1":case"- 0.01":case"- 0.001":this.__ExtendedStartModeInput4.setIsEnabled("Active"===this.__ExtendedStartModeCheckbox4.getToggleState())}};__onChangeExtendedStartModeCheckbox5=()=>{switch(this.__ComboboxStartMode.getText()){case"Absolute":case"Relative":case"Endless +":case"Endless -":case"Modulo":case"Modulo shortest way":case"Modulo plus direct":case"Modulo minus direct":case"Jog +":case"Jog -":case"+ 1":case"+ 0.1":case"+ 0.01":case"+ 0.001":case"- 1":case"- 0.1":case"- 0.01":case"- 0.001":this.__ExtendedStartModeInput5.setIsEnabled("Active"===this.__ExtendedStartModeCheckbox5.getToggleState())}};setCurrentAxis(CurrentAxisNew){let convertedValue=TcHmi.ValueConverter.toNumber(CurrentAxisNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("CurrentAxis")),convertedValue!==this.__currentAxis&&(this.__currentAxis=convertedValue,TcHmi.EventProvider.raise(this.__id+".onFunctionResultChanged",["getCurrentAxis"]),this.__processCurrentAxis())}getCurrentAxis(){return this.__currentAxis}__processCurrentAxis(){void 0!==this.__currentAxis&&(this.__ComboboxAxis.setSelectedId(this.__currentAxis),this.__axisRefStructure||(this.__resetAxisData(),this.__updateSubscription()))}setNcTask(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("NcTask")),convertedValue!==this.__NC_Task_Port_501&&(this.__NC_Task_Port_501=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"NcTask"}),this.__processNcTask())}getNcTask(){return this.__NC_Task_Port_501}__processNcTask(){this.__axisRefStructure&&(this.__ComboboxAxis.setVisibility("Visible"),this.__TextblockAxisName.setVisibility("Collapsed"),this.__elementContentTabs.disableContentTabs(),this.__getNcAxes(),this.__updateSubscription())}setMainNc(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("MainNc")),convertedValue!==this.__NC_Ring0_Port_500&&(this.__NC_Ring0_Port_500=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MainNc"}),this.__processMainNc())}getMainNc(){return this.__NC_Ring0_Port_500}__processMainNc(){this.__axisRefStructure&&(this.__ComboboxAxis.setVisibility("Visible"),this.__TextblockAxisName.setVisibility("Collapsed"),this.__elementContentTabs.disableContentTabs(),this.__getNcAxes(),this.__updateSubscription())}setAxisRef(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("AxisRef"));let resolverInfo=this.__objectResolvers.get("AxisRef");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue);this.__objectResolvers.set("AxisRef",{resolver:resolver,watchCallback:this.__onResolverForAxisRefWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForAxisRefWatchCallback)})}__onResolverForAxisRefWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("AxisRef"),tchmi_equal(data.value,this.__axisRefStructure)||(!this.__axisRefStructure!=!data.value&&(this.__updateSubscription(),this.__ComboboxAxis.setVisibility(data.value?"Collapsed":"Visible"),this.__TextblockAxisName.setVisibility(data.value?"Visible":"Collapsed"),data.value?this.__elementContentTabs.enableContentTabs():this.__elementContentTabs.disableContentTabs(),this.__getNcAxes()),this.__axisRefStructure=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"AxisRef"}),this.__processAxisRef())};getAxisRef(){return this.__axisRefStructure}__processAxisRef(){this.__getPLCData(),this.__updateStartModeCombobox()}__updateStartModeCombobox(){this.__axisRefStructure&&this.__mcMoveAbsolute&&!0!==this.__ComboboxStartModePLCSelection?(this.__ComboboxStartModePLCSelection=!0,this.__ComboboxStartMode.setSrcData(["Absolute"]),this.__ComboboxStartMode.setSelectedId(0)):this.__axisRefStructure&&this.__mcMoveAbsolute||!1===this.__ComboboxStartModePLCSelection||(this.__ComboboxStartModePLCSelection=!1,this.__ComboboxStartMode.setSrcData(["Absolute","Relative","Endless +","Endless -","Modulo","Modulo shortest way","Modulo plus direct","Modulo minus direct","Jog +","Jog -","+ 1","+ 0.1","+ 0.01","+ 0.001","- 1","- 0.1","- 0.01","- 0.001","Reversing Sequence","Velo Step Sequence"]),this.__ComboboxStartMode.setSelectedId(0))}setMcPower(valueNew){let newSymbol=valueNew;if(null===newSymbol){let symbolExpression=this.getAttributeDefaultValueInternal("McPower");symbolExpression&&(newSymbol=new TcHmi.Symbol(symbolExpression))}newSymbol!==this.__mcPowerSymbol&&(this.__mcPowerSymbol?.destroy(),this.__mcPowerSymbol=newSymbol,this.__mcPowerSymbolWatchDestroyer&&(this.__mcPowerSymbolWatchDestroyer(),this.__mcPowerSymbolWatchDestroyer=null),this.__mcPowerSymbolWatchDestroyer=this.__mcPowerSymbol?.watch((data=>{data.error===TcHmi.Errors.NONE?(!this.__mcPower!=!data.value&&this.__updateSubscription(),this.__mcPower=data.value,this.__processMcPower()):TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Attribute=McPower, Symbol=${this.__mcPowerSymbol?.getExpression().toString()}] `+TcHmi.Log.buildMessage(data.details))})),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"McPower"}))}getMcPower(){return this.__mcPowerSymbol}__processMcPower(){this.__getPLCData()}setMcMoveAbsolute(valueNew){let newSymbol=valueNew;if(null===newSymbol){let symbolExpression=this.getAttributeDefaultValueInternal("McMoveAbsolute");symbolExpression&&(newSymbol=new TcHmi.Symbol(symbolExpression))}newSymbol!==this.__mcMoveAbsoluteSymbol&&(this.__mcMoveAbsoluteSymbol?.destroy(),this.__mcMoveAbsoluteSymbol=newSymbol,this.__mcMoveAbsoluteSymbolWatchDestroyer&&(this.__mcMoveAbsoluteSymbolWatchDestroyer(),this.__mcMoveAbsoluteSymbolWatchDestroyer=null),this.__mcMoveAbsoluteSymbolWatchDestroyer=this.__mcMoveAbsoluteSymbol?.watch((data=>{data.error===TcHmi.Errors.NONE?(this.__mcMoveAbsolute=data.value,this.__processMoveAbsolute()):TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Attribute=McMoveAbsolute, Symbol=${this.__mcMoveAbsoluteSymbol?.getExpression().toString()}] `+TcHmi.Log.buildMessage(data.details))})),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"McMoveAbsolute"}))}getMcMoveAbsolute(){return this.__mcMoveAbsoluteSymbol}__processMoveAbsolute(){!0===this.__mcMoveAbsolute?.Execute&&(this.__mcMoveAbsolute.Execute=!1,this.__writeMcMoveAbsolute(this.__mcMoveAbsolute))}setMcMoveVelocity(valueNew){let newSymbol=valueNew;if(null===newSymbol){let symbolExpression=this.getAttributeDefaultValueInternal("McMoveVelocity");symbolExpression&&(newSymbol=new TcHmi.Symbol(symbolExpression))}newSymbol!==this.__McMoveVelocitySymbol&&(this.__McMoveVelocitySymbol?.destroy(),this.__McMoveVelocitySymbol=newSymbol,this.__mcMoveVelocitySymbolWatchDestroyer&&(this.__mcMoveVelocitySymbolWatchDestroyer(),this.__mcMoveVelocitySymbolWatchDestroyer=null),this.__mcMoveVelocitySymbolWatchDestroyer=this.__McMoveVelocitySymbol?.watch((data=>{data.error===TcHmi.Errors.NONE?(this.__McMoveVelocity=data.value,this.__processMoveRelative()):TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Attribute=McMoveVelocity, Symbol=${this.__McMoveVelocitySymbol?.getExpression().toString()}] `+TcHmi.Log.buildMessage(data.details))})),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"McMoveVelocity"}))}getMcMoveVelocity(){return this.__McMoveVelocitySymbol}__processMoveRelative(){!0===this.__McMoveVelocity?.Execute&&(this.__McMoveVelocity.Execute=!1,this.__writeMcMoveVelocity(this.__McMoveVelocity))}setMcReset(valueNew){let newSymbol=valueNew;if(null===newSymbol){let symbolExpression=this.getAttributeDefaultValueInternal("McReset");symbolExpression&&(newSymbol=new TcHmi.Symbol(symbolExpression))}newSymbol!==this.__mcResetSymbol&&(this.__mcResetSymbol?.destroy(),this.__mcResetSymbol=newSymbol,this.__mcResetSymbolWatchDestroyer&&(this.__mcResetSymbolWatchDestroyer(),this.__mcResetSymbolWatchDestroyer=null),this.__mcResetSymbolWatchDestroyer=this.__mcResetSymbol?.watch((data=>{data.error===TcHmi.Errors.NONE?(this.__mcReset=data.value,this.__processReset()):TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Attribute=McReset, Symbol=${this.__mcResetSymbol?.getExpression().toString()}] `+TcHmi.Log.buildMessage(data.details))})),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"McReset"}))}getMcReset(){return this.__mcResetSymbol}__processReset(){!0===this.__mcReset?.Execute&&(this.__mcReset.Execute=!1,this.__writeMcReset(this.__mcReset))}setMcHalt(valueNew){let newSymbol=valueNew;if(null===newSymbol){let symbolExpression=this.getAttributeDefaultValueInternal("McHalt");symbolExpression&&(newSymbol=new TcHmi.Symbol(symbolExpression))}newSymbol!==this.__mcHaltSymbol&&(this.__mcHaltSymbol?.destroy(),this.__mcHaltSymbol=newSymbol,this.__mcHaltSymbolWatchDestroyer&&(this.__mcHaltSymbolWatchDestroyer(),this.__mcHaltSymbolWatchDestroyer=null),this.__mcHaltSymbolWatchDestroyer=this.__mcHaltSymbol?.watch((data=>{data.error===TcHmi.Errors.NONE?(this.__mcHalt=data.value,this.__processHalt()):TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Attribute=McHalt, Symbol=${this.__mcHaltSymbol?.getExpression().toString()}] `+TcHmi.Log.buildMessage(data.details))})),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"McHalt"}))}getMcHalt(){return this.__mcHaltSymbol}__processHalt(){!0===this.__mcHalt?.Execute&&(this.__mcHalt.Execute=!1,this.__writeMcHalt(this.__mcHalt))}setMcHome(valueNew){let newSymbol=valueNew;if(null===newSymbol){let symbolExpression=this.getAttributeDefaultValueInternal("McHome");symbolExpression&&(newSymbol=new TcHmi.Symbol(symbolExpression))}newSymbol!==this.__mcHomeSymbol&&(this.__mcHomeSymbol?.destroy(),this.__mcHomeSymbol=newSymbol,this.__mcHomeSymbolWatchDestroyer&&(this.__mcHomeSymbolWatchDestroyer(),this.__mcHomeSymbolWatchDestroyer=null),this.__mcHomeSymbolWatchDestroyer=this.__mcHomeSymbol?.watch((data=>{data.error===TcHmi.Errors.NONE?(this.__mcHome=data.value,this.__processHome()):TcHmi.Log.errorEx(`[Source=Control, Module=${this.__type+(TcHmiMotionControl.#tchmiFQN!==this.__type?", Origin="+TcHmiMotionControl.#tchmiFQN:"")}, Id=${this.getId()}, Attribute=McHome, Symbol=${this.__mcHomeSymbol?.getExpression().toString()}] `+TcHmi.Log.buildMessage(data.details))})),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"McHome"}))}getMcHome(){return this.__mcHomeSymbol}__processHome(){!0===this.__mcHome?.Execute&&(this.__mcHome.Execute=!1,this.__writeMcHome(this.__mcHome))}}TcHmiMotion.TcHmiMotionControl=TcHmiMotionControl}(Beckhoff.TcHmiMotion||(Beckhoff.TcHmiMotion={}))}(Controls.Beckhoff||(Controls.Beckhoff={}))}(TcHmi.Controls||(TcHmi.Controls={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("TcHmiMotionControl","TcHmi.Controls.Beckhoff.TcHmiMotion",TcHmi.Controls.Beckhoff.TcHmiMotion.TcHmiMotionControl);